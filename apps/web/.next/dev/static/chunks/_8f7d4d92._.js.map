{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/types/index.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/types/index.ts"],"sourcesContent":["// Core type definitions for the modular Geometry Dash game\n\nexport interface Vector2D {\n  x: number;\n  y: number;\n}\n\nexport interface GameObject {\n  id: string;\n  position: Vector2D;\n  velocity: Vector2D;\n  size: Vector2D;\n  type: GameObjectType;\n  active: boolean;\n}\n\nexport enum GameObjectType {\n  PLAYER = 'player',\n  OBSTACLE_SPIKE = 'obstacle_spike',\n  OBSTACLE_BLOCK = 'obstacle_block',\n  PLATFORM = 'platform',\n  PORTAL = 'portal',\n  COLLECTIBLE = 'collectible',\n}\n\nexport interface Player extends GameObject {\n  isJumping: boolean;\n  isOnGround: boolean;\n  health: number;\n  score: number;\n}\n\nexport interface Obstacle extends GameObject {\n  damage: number;\n}\n\nexport interface Platform extends GameObject {\n  width: number;\n}\n\n// Level generation types - designed for ML integration\nexport interface LevelSegment {\n  id: string;\n  startX: number;\n  length: number;\n  difficulty: number;\n  objects: GameObject[];\n  metadata?: Record<string, any>;\n}\n\nexport interface Level {\n  id: string;\n  name: string;\n  segments: LevelSegment[];\n  totalLength: number;\n  difficulty: number;\n  generatedBy?: 'manual' | 'procedural' | 'ml';\n  mlModelVersion?: string;\n}\n\n// ML-ready level generation interface\nexport interface LevelGeneratorConfig {\n  difficulty: number;\n  length: number;\n  seed?: number;\n  style?: 'classic' | 'modern' | 'extreme';\n  constraints?: LevelConstraints;\n}\n\nexport interface LevelConstraints {\n  maxObstacleHeight?: number;\n  minPlatformWidth?: number;\n  maxGapSize?: number;\n  obstacleFrequency?: number;\n}\n\n// Game state\nexport interface GameState {\n  player: Player;\n  currentLevel: Level;\n  currentSegmentIndex: number;\n  gameObjects: GameObject[];\n  cameraOffset: number;\n  isPaused: boolean;\n  isGameOver: boolean;\n  score: number;\n  elapsedTime: number; // Seconds since game start (resets on restart)\n}\n\n// Physics configuration\nexport interface PhysicsConfig {\n  gravity: number;\n  jumpForce: number;\n  maxVelocity: Vector2D;\n  friction: number;\n}\n\n// Input state\nexport interface InputState {\n  jump: boolean;\n  restart: boolean;\n  pause: boolean;\n}\n"],"names":[],"mappings":"AAAA,2DAA2D;;;;;AAgB3D,IAAY,cAOX;AAPD,CAAA,SAAY,cAAc;IACxB,cAAA,CAAA,SAAA,GAAA,QAAiB,CAAA;IACjB,cAAA,CAAA,iBAAA,GAAA,gBAAiC,CAAA;IACjC,cAAA,CAAA,iBAAA,GAAA,gBAAiC,CAAA;IACjC,cAAA,CAAA,WAAA,GAAA,UAAqB,CAAA;IACrB,cAAA,CAAA,SAAA,GAAA,QAAiB,CAAA;IACjB,cAAA,CAAA,cAAA,GAAA,aAA2B,CAAA;AAC7B,CAAC,EAPW,cAAc,IAAA,CAAA,QAAA,cAAA,GAAd,cAAc,GAAA,CAAA,CAAA,GAOzB"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/engine/CollisionDetection.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/engine/CollisionDetection.ts"],"sourcesContent":["// Axis-Aligned Bounding Box (AABB) collision detection system\nimport { GameObject, Vector2D, GameObjectType } from '../types';\n\n/** Padding for obstacle bounds - prevents jump-through on sides/bottom. No top padding on blocks so players can land on them. */\nconst OBSTACLE_SIDE_PADDING = 4;\nconst OBSTACLE_SPIKE_FULL_PADDING = 6;\n\nexport class CollisionDetection {\n  /**\n   * Check if two game objects are colliding using AABB collision detection\n   * @param a First game object\n   * @param b Second game object\n   * @returns true if objects are colliding\n   */\n  static checkAABBCollision(a: GameObject, b: GameObject): boolean {\n    return (\n      a.position.x < b.position.x + b.size.x &&\n      a.position.x + a.size.x > b.position.x &&\n      a.position.y < b.position.y + b.size.y &&\n      a.position.y + a.size.y > b.position.y\n    );\n  }\n\n  /**\n   * Check collision with an obstacle. Uses asymmetric padding:\n   * - OBSTACLE_BLOCK: padding on sides/bottom only (no top) so players can land on blocks\n   * - OBSTACLE_SPIKE: full padding on all sides\n   */\n  static checkObstacleCollision(player: GameObject, obstacle: GameObject): boolean {\n    if (obstacle.type === GameObjectType.OBSTACLE_BLOCK) {\n      const p = OBSTACLE_SIDE_PADDING;\n      const left = obstacle.position.x - p;\n      const right = obstacle.position.x + obstacle.size.x + p;\n      const top = obstacle.position.y; // No top padding - landable\n      const bottom = obstacle.position.y + obstacle.size.y + p;\n      return (\n        player.position.x < right &&\n        player.position.x + player.size.x > left &&\n        player.position.y < bottom &&\n        player.position.y + player.size.y > top\n      );\n    }\n    const p = OBSTACLE_SPIKE_FULL_PADDING;\n    const left = obstacle.position.x - p;\n    const right = obstacle.position.x + obstacle.size.x + p;\n    const top = obstacle.position.y - p;\n    const bottom = obstacle.position.y + obstacle.size.y + p;\n    return (\n      player.position.x < right &&\n      player.position.x + player.size.x > left &&\n      player.position.y < bottom &&\n      player.position.y + player.size.y > top\n    );\n  }\n\n  /**\n   * Check if a point is inside a game object\n   * @param point The point to check\n   * @param obj The game object\n   * @returns true if point is inside object\n   */\n  static pointInObject(point: Vector2D, obj: GameObject): boolean {\n    return (\n      point.x >= obj.position.x &&\n      point.x <= obj.position.x + obj.size.x &&\n      point.y >= obj.position.y &&\n      point.y <= obj.position.y + obj.size.y\n    );\n  }\n\n  /**\n   * Find all collisions between a game object and a list of objects\n   * Uses expanded obstacle bounds for OBSTACLE_SPIKE and OBSTACLE_BLOCK to prevent jump-through.\n   * @param obj The object to check collisions for\n   * @param objects List of objects to check against\n   * @returns Array of objects that are colliding with obj\n   */\n  static findCollisions(obj: GameObject, objects: GameObject[]): GameObject[] {\n    return objects.filter((other) => {\n      if (other.id === obj.id || !other.active) return false;\n      if (\n        other.type === GameObjectType.OBSTACLE_SPIKE ||\n        other.type === GameObjectType.OBSTACLE_BLOCK\n      ) {\n        return this.checkObstacleCollision(obj, other);\n      }\n      return this.checkAABBCollision(obj, other);\n    });\n  }\n\n  /**\n   * Calculate the penetration depth of a collision\n   * @param a First game object\n   * @param b Second game object\n   * @returns Vector representing penetration depth (positive means overlap)\n   */\n  static getPenetrationDepth(a: GameObject, b: GameObject): Vector2D {\n    const overlapX = Math.min(\n      a.position.x + a.size.x - b.position.x,\n      b.position.x + b.size.x - a.position.x\n    );\n\n    const overlapY = Math.min(\n      a.position.y + a.size.y - b.position.y,\n      b.position.y + b.size.y - a.position.y\n    );\n\n    return { x: overlapX, y: overlapY };\n  }\n\n  /**\n   * Check if an object is on the ground (standing on a platform)\n   * @param obj The object to check\n   * @param platforms List of platform objects\n   * @param tolerance How close to be considered \"on ground\"\n   * @returns true if object is on ground\n   */\n  static isOnGround(obj: GameObject, platforms: GameObject[], tolerance: number = 2): boolean {\n    const bottomY = obj.position.y + obj.size.y;\n\n    for (const platform of platforms) {\n      if (!platform.active) continue;\n\n      const platformTop = platform.position.y;\n      const horizontalOverlap =\n        obj.position.x + obj.size.x > platform.position.x &&\n        obj.position.x < platform.position.x + platform.size.x;\n\n      // Check if object's bottom is close to platform's top\n      if (horizontalOverlap && Math.abs(bottomY - platformTop) <= tolerance) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/engine/PhysicsEngine.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/engine/PhysicsEngine.ts"],"sourcesContent":["// Physics simulation system for the game\nimport { GameObject, Player, PhysicsConfig, Vector2D, GameObjectType } from '../types';\nimport { CollisionDetection } from './CollisionDetection';\n\nexport class PhysicsEngine {\n  private config: PhysicsConfig;\n\n  constructor(config?: Partial<PhysicsConfig>) {\n    // Default physics configuration (tuned for Geometry Dash-like gameplay)\n    this.config = {\n      gravity: 2800, // pixels per second squared\n      jumpForce: -680, // Fixed height - any tap clears 1 block (50px)\n      maxVelocity: { x: 400, y: 1200 }, // pixels per second\n      friction: 0.8,\n      ...config,\n    };\n  }\n\n  /**\n   * Get the current physics configuration\n   */\n  getConfig(): PhysicsConfig {\n    return { ...this.config };\n  }\n\n  /**\n   * Update physics configuration\n   */\n  updateConfig(config: Partial<PhysicsConfig>): void {\n    this.config = { ...this.config, ...config };\n  }\n\n  /**\n   * Apply gravity to an object\n   * @param obj The game object\n   * @param deltaTime Time elapsed since last update (in seconds)\n   */\n  applyGravity(obj: GameObject, deltaTime: number): void {\n    obj.velocity.y += this.config.gravity * deltaTime;\n\n    // Clamp to max velocity\n    if (obj.velocity.y > this.config.maxVelocity.y) {\n      obj.velocity.y = this.config.maxVelocity.y;\n    }\n  }\n\n  /**\n   * Update object position based on velocity\n   * @param obj The game object\n   * @param deltaTime Time elapsed since last update (in seconds)\n   */\n  updatePosition(obj: GameObject, deltaTime: number): void {\n    obj.position.x += obj.velocity.x * deltaTime;\n    obj.position.y += obj.velocity.y * deltaTime;\n  }\n\n  /**\n   * Make the player jump - fixed height, any tap (even 0.1ms) clears 1 block (50px)\n   */\n  jump(player: Player): void {\n    if (player.isOnGround && !player.isJumping) {\n      player.velocity.y = this.config.jumpForce;\n      player.isJumping = true;\n      player.isOnGround = false;\n    }\n  }\n\n  /**\n   * Set the player's horizontal velocity (auto-run)\n   * @param player The player object\n   * @param speed Speed in pixels per second\n   */\n  setPlayerRunSpeed(player: Player, speed: number): void {\n    player.velocity.x = Math.min(speed, this.config.maxVelocity.x);\n  }\n\n  /**\n   * Update player physics state\n   * @param player The player object\n   * @param platforms List of platform objects\n   * @param deltaTime Time elapsed since last update (in seconds)\n   * @param floorY Optional - ground surface Y (player bottom clamped to never go below this)\n   */\n  updatePlayer(\n    player: Player,\n    platforms: GameObject[],\n    deltaTime: number,\n    floorY?: number\n  ): void {\n    // Apply gravity\n    this.applyGravity(player, deltaTime);\n\n    // Update position\n    this.updatePosition(player, deltaTime);\n\n    // Prevent jumping through platforms from below\n    if (player.velocity.y < 0) {\n      for (const platform of platforms) {\n        if (!platform.active) continue;\n        if (!CollisionDetection.checkAABBCollision(player, platform)) continue;\n\n        const platformBottom = platform.position.y + platform.size.y;\n        if (player.position.y + player.size.y > platformBottom) {\n          player.position.y = platformBottom;\n          player.velocity.y = 0;\n        }\n      }\n    }\n\n    // Prevent falling through floors - resolve penetration when player has dropped into a platform\n    if (player.velocity.y >= 0) {\n      const playerBottom = player.position.y + player.size.y;\n      // Sort by platform top (ascending) so we snap to the highest platform we've penetrated\n      const sortedPlatforms = [...platforms].sort(\n        (a, b) => a.position.y - b.position.y\n      );\n      for (const platform of sortedPlatforms) {\n        if (!platform.active) continue;\n\n        const platformTop = platform.position.y;\n        const horizontalOverlap =\n          player.position.x + player.size.x > platform.position.x &&\n          player.position.x < platform.position.x + platform.size.x;\n\n        // Player has fallen into/through the platform (bottom penetrated past top)\n        if (horizontalOverlap && playerBottom > platformTop) {\n          player.position.y = platformTop - player.size.y;\n          player.velocity.y = 0;\n          break; // Resolve one platform per frame\n        }\n      }\n    }\n\n    // Check ground collision\n    const wasOnGround = player.isOnGround;\n    player.isOnGround = CollisionDetection.isOnGround(player, platforms, 12);\n\n    if (player.isOnGround) {\n      // Snap to platform\n      const groundPlatform = this.findGroundPlatform(player, platforms);\n      if (groundPlatform) {\n        player.position.y = groundPlatform.position.y - player.size.y;\n        player.velocity.y = 0;\n        player.isJumping = false;\n      }\n    } else if (wasOnGround && !player.isOnGround) {\n      // Just left the ground (falling)\n      player.isJumping = false;\n    }\n\n    // Hard floor clamp - keep player above floor at all times (failsafe)\n    if (floorY !== undefined) {\n      const playerBottom = player.position.y + player.size.y;\n      if (playerBottom > floorY) {\n        player.position.y = floorY - player.size.y;\n        player.velocity.y = 0;\n        player.isOnGround = true;\n        player.isJumping = false;\n      }\n    }\n\n    // Apply friction to horizontal movement (optional)\n    // player.velocity.x *= this.config.friction;\n  }\n\n  /**\n   * Find the platform the player is standing on\n   * @param player The player object\n   * @param platforms List of platform objects\n   * @returns The platform object or null\n   */\n  private findGroundPlatform(player: Player, platforms: GameObject[]): GameObject | null {\n    const bottomY = player.position.y + player.size.y;\n\n    for (const platform of platforms) {\n      if (!platform.active) continue;\n\n      const platformTop = platform.position.y;\n      const horizontalOverlap =\n        player.position.x + player.size.x > platform.position.x &&\n        player.position.x < platform.position.x + platform.size.x;\n\n      if (horizontalOverlap && Math.abs(bottomY - platformTop) <= 12) {\n        return platform;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Handle collision response for the player\n   * @param player The player object\n   * @param collidedObject The object the player collided with\n   * @returns true if the collision was fatal\n   */\n  handlePlayerCollision(player: Player, collidedObject: GameObject): boolean {\n    switch (collidedObject.type) {\n      case GameObjectType.OBSTACLE_SPIKE:\n        player.health = 0;\n        return true;\n\n      case GameObjectType.OBSTACLE_BLOCK:\n        // Landing on top of a block is safe - treat like a platform\n        const playerBottom = player.position.y + player.size.y;\n        const blockTop = collidedObject.position.y;\n        const landingTolerance = 18; // Forgiving window for landing\n        const isLandingOnTop =\n          playerBottom >= blockTop - 4 &&\n          playerBottom <= blockTop + landingTolerance &&\n          player.velocity.y >= -150; // Falling or just landed (allow slight upward at peak)\n        if (isLandingOnTop) {\n          return false; // Not fatal - physics will snap player on top\n        }\n        player.health = 0;\n        return true;\n\n      case GameObjectType.PLATFORM:\n        // Platform collision handled in updatePlayer\n        return false;\n\n      case GameObjectType.PORTAL:\n        // Portal logic (can be extended later)\n        return false;\n\n      default:\n        return false;\n    }\n  }\n\n  /**\n   * Reset player physics state\n   * @param player The player object\n   */\n  resetPlayer(player: Player): void {\n    player.velocity = { x: 0, y: 0 };\n    player.isJumping = false;\n    player.isOnGround = false;\n  }\n\n  /**\n   * Check if an object is out of bounds\n   * @param obj The game object\n   * @param bounds The game bounds\n   * @returns true if object is out of bounds\n   */\n  isOutOfBounds(obj: GameObject, bounds: { width: number; height: number }): boolean {\n    return (\n      obj.position.y > bounds.height || // Fell off the bottom\n      obj.position.y + obj.size.y < 0 || // Above the screen\n      obj.position.x + obj.size.x < 0 // Left of the screen\n    );\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 346, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/engine/InputHandler.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/engine/InputHandler.ts"],"sourcesContent":["// Input handling system for keyboard and touch events\nimport { InputState } from '../types';\n\nexport class InputHandler {\n  private inputState: InputState;\n  private keyMap: Map<string, keyof InputState>;\n  private activeKeys: Set<string>;\n\n  constructor() {\n    this.inputState = {\n      jump: false,\n      restart: false,\n      pause: false,\n    };\n\n    // Map keyboard keys to input actions\n    this.keyMap = new Map([\n      [' ', 'jump'], // Space bar\n      ['ArrowUp', 'jump'], // Up arrow\n      ['w', 'jump'], // W key\n      ['W', 'jump'],\n      ['r', 'restart'], // R key\n      ['R', 'restart'],\n      ['p', 'pause'], // P key\n      ['P', 'pause'],\n      ['Escape', 'pause'], // Escape key\n    ]);\n\n    this.activeKeys = new Set();\n    this.setupEventListeners();\n  }\n\n  /**\n   * Set up keyboard and touch event listeners\n   */\n  private setupEventListeners(): void {\n    // Keyboard events\n    window.addEventListener('keydown', this.handleKeyDown.bind(this));\n    window.addEventListener('keyup', this.handleKeyUp.bind(this));\n\n    // Touch/click events (for mobile and mouse)\n    window.addEventListener('mousedown', this.handlePointerDown.bind(this));\n    window.addEventListener('mouseup', this.handlePointerUp.bind(this));\n    window.addEventListener('touchstart', this.handlePointerDown.bind(this), { passive: false });\n    window.addEventListener('touchend', this.handlePointerUp.bind(this), { passive: false });\n  }\n\n  /**\n   * Handle key down events\n   */\n  private handleKeyDown(event: KeyboardEvent): void {\n    const action = this.keyMap.get(event.key);\n\n    if (action) {\n      event.preventDefault();\n\n      // Prevent key repeat for single-press actions\n      if (!this.activeKeys.has(event.key)) {\n        this.inputState[action] = true;\n        this.activeKeys.add(event.key);\n      }\n    }\n  }\n\n  /**\n   * Handle key up events\n   */\n  private handleKeyUp(event: KeyboardEvent): void {\n    const action = this.keyMap.get(event.key);\n\n    if (action) {\n      event.preventDefault();\n      this.inputState[action] = false;\n      this.activeKeys.delete(event.key);\n    }\n  }\n\n  /**\n   * Handle pointer down (mouse/touch)\n   */\n  private handlePointerDown(event: MouseEvent | TouchEvent): void {\n    event.preventDefault();\n    this.inputState.jump = true;\n  }\n\n  /**\n   * Handle pointer up (mouse/touch)\n   */\n  private handlePointerUp(event: MouseEvent | TouchEvent): void {\n    event.preventDefault();\n    this.inputState.jump = false;\n  }\n\n  /**\n   * Get the current input state\n   */\n  getInputState(): InputState {\n    return { ...this.inputState };\n  }\n\n  /**\n   * Check if a specific action is active\n   */\n  isActionActive(action: keyof InputState): boolean {\n    return this.inputState[action];\n  }\n\n  /**\n   * Reset all input states\n   */\n  reset(): void {\n    this.inputState.jump = false;\n    this.inputState.restart = false;\n    this.inputState.pause = false;\n    this.activeKeys.clear();\n  }\n\n  /**\n   * Consume an action (set it to false after reading)\n   * Useful for single-press actions like restart and pause\n   */\n  consumeAction(action: keyof InputState): boolean {\n    const value = this.inputState[action];\n    if (value) {\n      this.inputState[action] = false;\n    }\n    return value;\n  }\n\n  /**\n   * Clean up event listeners (call when destroying the game)\n   */\n  destroy(): void {\n    window.removeEventListener('keydown', this.handleKeyDown.bind(this));\n    window.removeEventListener('keyup', this.handleKeyUp.bind(this));\n    window.removeEventListener('mousedown', this.handlePointerDown.bind(this));\n    window.removeEventListener('mouseup', this.handlePointerUp.bind(this));\n    window.removeEventListener('touchstart', this.handlePointerDown.bind(this));\n    window.removeEventListener('touchend', this.handlePointerUp.bind(this));\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 499, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/engine/GameEngine.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/engine/GameEngine.ts"],"sourcesContent":["// Main game engine with game loop and state management\nimport { GameState, Player, GameObject, GameObjectType, Level, PhysicsConfig } from '../types';\nimport { PhysicsEngine } from './PhysicsEngine';\nimport { CollisionDetection } from './CollisionDetection';\nimport { InputHandler } from './InputHandler';\n\nexport interface GameEngineConfig {\n  canvasWidth: number;\n  canvasHeight: number;\n  playerSpeed: number; // Auto-run speed\n  physicsConfig?: Partial<PhysicsConfig>;\n}\n\nexport class GameEngine {\n  private gameState: GameState;\n  private physicsEngine: PhysicsEngine;\n  private inputHandler: InputHandler;\n  private config: GameEngineConfig;\n\n  private animationFrameId: number | null = null;\n  private lastFrameTime: number = 0;\n  private isRunning: boolean = false;\n\n  // Callbacks for rendering and events\n  private onRenderCallback?: (state: GameState) => void;\n  private onGameOverCallback?: (score: number) => void;\n  private onScoreUpdateCallback?: (score: number) => void;\n\n  constructor(initialLevel: Level, config: GameEngineConfig) {\n    this.config = config;\n    this.physicsEngine = new PhysicsEngine(config.physicsConfig);\n    this.inputHandler = new InputHandler();\n\n    // Initialize game state\n    this.gameState = this.createInitialState(initialLevel);\n  }\n\n  /**\n   * Create initial game state\n   */\n  private createInitialState(level: Level): GameState {\n    const player: Player = {\n      id: 'player',\n      position: { x: 100, y: this.config.canvasHeight - 150 },\n      velocity: { x: this.config.playerSpeed, y: 0 },\n      size: { x: 30, y: 30 },\n      type: GameObjectType.PLAYER,\n      active: true,\n      isJumping: false,\n      isOnGround: false,\n      health: 1,\n      score: 0,\n    };\n\n    return {\n      player,\n      currentLevel: level,\n      currentSegmentIndex: 0,\n      gameObjects: this.loadVisibleObjects(level, 0),\n      cameraOffset: 0,\n      isPaused: false,\n      isGameOver: false,\n      score: 0,\n      elapsedTime: 0,\n    };\n  }\n\n  /**\n   * Load game objects that are currently visible or near the player\n   */\n  private loadVisibleObjects(level: Level, cameraOffset: number): GameObject[] {\n    const loadDistance = this.config.canvasWidth * 2; // Load objects 2 screens ahead\n    const objects: GameObject[] = [];\n\n    for (const segment of level.segments) {\n      // Check if segment is in visible range\n      if (\n        segment.startX + segment.length >= cameraOffset &&\n        segment.startX <= cameraOffset + loadDistance\n      ) {\n        objects.push(...segment.objects.filter((obj) => obj.active));\n      }\n    }\n\n    return objects;\n  }\n\n  /**\n   * Start the game loop\n   */\n  start(): void {\n    if (this.isRunning) return;\n\n    this.isRunning = true;\n    this.lastFrameTime = performance.now();\n    this.gameLoop(this.lastFrameTime);\n  }\n\n  /**\n   * Stop the game loop\n   */\n  stop(): void {\n    this.isRunning = false;\n    if (this.animationFrameId !== null) {\n      cancelAnimationFrame(this.animationFrameId);\n      this.animationFrameId = null;\n    }\n  }\n\n  /**\n   * Main game loop using requestAnimationFrame\n   */\n  private gameLoop(currentTime: number): void {\n    if (!this.isRunning) return;\n\n    // Calculate delta time (in seconds)\n    const deltaTime = Math.min((currentTime - this.lastFrameTime) / 1000, 0.1); // Cap at 100ms\n    this.lastFrameTime = currentTime;\n\n    // Update game state\n    this.update(deltaTime);\n\n    // Render\n    if (this.onRenderCallback) {\n      this.onRenderCallback(this.gameState);\n    }\n\n    // Request next frame\n    this.animationFrameId = requestAnimationFrame(this.gameLoop.bind(this));\n  }\n\n  /**\n   * Update game state\n   */\n  /** Ground surface Y - player bottom must never go below this. Matches level design. */\n  private static readonly GROUND_Y = 500;\n\n  private update(deltaTime: number): void {\n    if (this.gameState.isGameOver) return;\n\n    // CRITICAL: Floor clamp FIRST - fix any bad state from previous frame immediately\n    const player = this.gameState.player;\n    const playerBottom = player.position.y + player.size.y;\n    if (playerBottom > GameEngine.GROUND_Y) {\n      player.position.y = GameEngine.GROUND_Y - player.size.y;\n      player.velocity.y = 0;\n      player.isOnGround = true;\n      player.isJumping = false;\n    }\n\n    // Handle input\n    this.handleInput();\n\n    if (this.gameState.isPaused) return;\n\n    this.gameState.elapsedTime += deltaTime;\n\n    // Update player physics - include OBSTACLE_BLOCK so player can land on top of blocks\n    const levelPlatforms = this.gameState.gameObjects.filter(\n      (obj) =>\n        (obj.type === GameObjectType.PLATFORM || obj.type === GameObjectType.OBSTACLE_BLOCK) &&\n        obj.active\n    );\n\n    // Permanent safety floor - prevents falling through (never unloaded, spans entire level)\n    const safetyFloor: GameObject = {\n      id: '__safety_floor__',\n      position: { x: -5000, y: GameEngine.GROUND_Y },\n      velocity: { x: 0, y: 0 },\n      size: { x: 20000, y: 50 },\n      type: GameObjectType.PLATFORM,\n      active: true,\n    };\n    const platforms = [safetyFloor, ...levelPlatforms];\n\n    // floorY = ground surface - player bottom clamped to never go below this\n    this.physicsEngine.updatePlayer(\n      this.gameState.player,\n      platforms,\n      deltaTime,\n      GameEngine.GROUND_Y\n    );\n\n    // Maintain player's forward speed\n    this.physicsEngine.setPlayerRunSpeed(this.gameState.player, this.config.playerSpeed);\n\n    // Update camera to follow player\n    this.updateCamera();\n\n    // Load/unload objects based on camera position\n    this.updateVisibleObjects();\n\n    // Check collisions\n    this.checkCollisions();\n\n    // Check out of bounds - only die from going off left or above; never from falling\n    // Final floor clamp (belt and suspenders)\n    if (player.position.y + player.size.y > GameEngine.GROUND_Y) {\n      player.position.y = GameEngine.GROUND_Y - player.size.y;\n      player.velocity.y = 0;\n      player.isOnGround = true;\n      player.isJumping = false;\n    }\n    // Only trigger game over for left/above bounds, not falling\n    if (\n      player.position.x + player.size.x < 0 ||\n      player.position.y + player.size.y < 0\n    ) {\n      this.handleGameOver();\n    }\n\n    // Update score\n    if (this.gameState.player.score !== this.gameState.score) {\n      this.gameState.score = this.gameState.player.score;\n      if (this.onScoreUpdateCallback) {\n        this.onScoreUpdateCallback(this.gameState.score);\n      }\n    }\n  }\n\n  /**\n   * Handle player input\n   */\n  private handleInput(): void {\n    const input = this.inputHandler.getInputState();\n\n    // Jump\n    if (input.jump) {\n      this.physicsEngine.jump(this.gameState.player);\n    }\n\n    // Restart\n    if (this.inputHandler.consumeAction('restart')) {\n      this.restart();\n    }\n\n    // Pause\n    if (this.inputHandler.consumeAction('pause')) {\n      this.togglePause();\n    }\n  }\n\n  /**\n   * Update camera position to follow player\n   */\n  private updateCamera(): void {\n    const playerScreenX = this.gameState.player.position.x - this.gameState.cameraOffset;\n    const targetScreenX = this.config.canvasWidth * 0.3; // Keep player at 30% of screen width\n\n    if (playerScreenX > targetScreenX) {\n      this.gameState.cameraOffset += playerScreenX - targetScreenX;\n    }\n  }\n\n  /**\n   * Update visible objects based on camera position\n   */\n  private updateVisibleObjects(): void {\n    const loadDistance = this.config.canvasWidth * 2;\n    const unloadDistance = -this.config.canvasWidth;\n\n    // Remove objects that are too far behind (never unload floor/platforms - prevents fall-through)\n    this.gameState.gameObjects = this.gameState.gameObjects.filter((obj) => {\n      if (obj.type === GameObjectType.PLATFORM) return true; // Always keep platforms\n      const relativeX = obj.position.x - this.gameState.cameraOffset;\n      return relativeX > unloadDistance;\n    });\n\n    // Load new objects ahead\n    const existingIds = new Set(this.gameState.gameObjects.map((obj) => obj.id));\n    const newObjects = this.loadVisibleObjects(\n      this.gameState.currentLevel,\n      this.gameState.cameraOffset\n    ).filter((obj) => !existingIds.has(obj.id));\n\n    this.gameState.gameObjects.push(...newObjects);\n  }\n\n  /**\n   * Check and handle collisions\n   */\n  private checkCollisions(): void {\n    const collisions = CollisionDetection.findCollisions(\n      this.gameState.player,\n      this.gameState.gameObjects\n    );\n\n    for (const obj of collisions) {\n      const isFatal = this.physicsEngine.handlePlayerCollision(this.gameState.player, obj);\n      if (isFatal) {\n        this.handleGameOver();\n        break;\n      }\n    }\n  }\n\n  /**\n   * Handle game over\n   */\n  private handleGameOver(): void {\n    this.gameState.isGameOver = true;\n    this.gameState.player.health = 0;\n\n    if (this.onGameOverCallback) {\n      this.onGameOverCallback(this.gameState.score);\n    }\n  }\n\n  /**\n   * Restart the game\n   */\n  restart(): void {\n    this.gameState = this.createInitialState(this.gameState.currentLevel);\n    this.inputHandler.reset();\n  }\n\n  /**\n   * Toggle pause state\n   */\n  togglePause(): void {\n    this.gameState.isPaused = !this.gameState.isPaused;\n  }\n\n  /**\n   * Pause the game\n   */\n  pause(): void {\n    this.gameState.isPaused = true;\n  }\n\n  /**\n   * Resume the game\n   */\n  resume(): void {\n    this.gameState.isPaused = false;\n  }\n\n  /**\n   * Get current game state (immutable copy)\n   */\n  getState(): GameState {\n    return JSON.parse(JSON.stringify(this.gameState));\n  }\n\n  /**\n   * Set render callback\n   */\n  onRender(callback: (state: GameState) => void): void {\n    this.onRenderCallback = callback;\n  }\n\n  /**\n   * Set game over callback\n   */\n  onGameOver(callback: (score: number) => void): void {\n    this.onGameOverCallback = callback;\n  }\n\n  /**\n   * Set score update callback\n   */\n  onScoreUpdate(callback: (score: number) => void): void {\n    this.onScoreUpdateCallback = callback;\n  }\n\n  /**\n   * Load a new level\n   */\n  loadLevel(level: Level): void {\n    this.stop();\n    this.gameState = this.createInitialState(level);\n    this.start();\n  }\n\n  /**\n   * Clean up resources\n   */\n  destroy(): void {\n    this.stop();\n    this.inputHandler.destroy();\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 799, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/engine/index.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/engine/index.ts"],"sourcesContent":["// Game Engine Module Exports\nexport { GameEngine } from './GameEngine';\nexport type { GameEngineConfig } from './GameEngine';\n\nexport { PhysicsEngine } from './PhysicsEngine';\nexport { CollisionDetection } from './CollisionDetection';\nexport { InputHandler } from './InputHandler';\n"],"names":[],"mappings":";;;;AAAA,6BAA6B;AAC7B,IAAA,uCAA0C;AAAjC,OAAA,cAAA,CAAA,SAAA,cAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,aAAA,UAAU;IAAA;AAAA,GAAA;AAGnB,IAAA,6CAAgD;AAAvC,OAAA,cAAA,CAAA,SAAA,iBAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,gBAAA,aAAa;IAAA;AAAA,GAAA;AACtB,IAAA,uDAA0D;AAAjD,OAAA,cAAA,CAAA,SAAA,sBAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,qBAAA,kBAAkB;IAAA;AAAA,GAAA;AAC3B,IAAA,2CAA8C;AAArC,OAAA,cAAA,CAAA,SAAA,gBAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,eAAA,YAAY;IAAA;AAAA,GAAA"}},
    {"offset": {"line": 839, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/systems/Renderer.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/systems/Renderer.ts"],"sourcesContent":["// Core rendering system for the Geometry Dash clone\n// Handles canvas drawing, camera, and visual effects\n\nimport {\n  GameObject,\n  Player,\n  Obstacle,\n  Platform,\n  GameObjectType,\n  Vector2D,\n  GameState,\n} from '../types';\n\nexport interface RenderConfig {\n  canvas: HTMLCanvasElement;\n  width: number;\n  height: number;\n  pixelRatio?: number;\n}\n\nexport class Renderer {\n  private ctx: CanvasRenderingContext2D;\n  private canvas: HTMLCanvasElement;\n  private width: number;\n  private height: number;\n  private pixelRatio: number;\n\n  // Background parallax layers\n  private starsImage: HTMLImageElement | null = null;\n  private cloudsImage: HTMLImageElement | null = null;\n  private backgroundOffset: number = 0;\n\n  // Color palette - Geometry Dash inspired with HackIllinois purple theme\n  private colors = {\n    sky: '#1a1033',\n    skyGradientTop: '#2d1b4e',\n    skyGradientBottom: '#1a1033',\n    ground: '#6b46c1',\n    groundDark: '#553c9a',\n    player: '#00f2ff',\n    playerGlow: '#00d4ff',\n    obstacle: '#ff006e',\n    obstacleGlow: '#ff1a7f',\n    platform: '#8b5cf6',\n    platformGlow: '#a78bfa',\n    collectible: '#fbbf24',\n    portal: '#8b5cf6',\n    particle: '#ffffff',\n    star: '#ffefcf',\n  };\n\n  constructor(config: RenderConfig) {\n    this.canvas = config.canvas;\n    this.width = config.width;\n    this.height = config.height;\n    this.pixelRatio = config.pixelRatio || window.devicePixelRatio || 1;\n\n    const ctx = this.canvas.getContext('2d');\n    if (!ctx) {\n      throw new Error('Failed to get 2D rendering context');\n    }\n    this.ctx = ctx;\n\n    this.setupCanvas();\n    this.loadBackgroundAssets();\n  }\n\n  private setupCanvas(): void {\n    // Set canvas size accounting for device pixel ratio\n    this.canvas.width = this.width * this.pixelRatio;\n    this.canvas.height = this.height * this.pixelRatio;\n    this.canvas.style.width = `${this.width}px`;\n    this.canvas.style.height = `${this.height}px`;\n\n    // Scale context to match device pixel ratio\n    this.ctx.scale(this.pixelRatio, this.pixelRatio);\n\n    // Enable image smoothing for better quality\n    this.ctx.imageSmoothingEnabled = true;\n    this.ctx.imageSmoothingQuality = 'high';\n  }\n\n  private loadBackgroundAssets(): void {\n    // Load stars\n    this.starsImage = new Image();\n    this.starsImage.src = '/assets/stars.svg';\n\n    // Load clouds\n    this.cloudsImage = new Image();\n    this.cloudsImage.src = '/assets/clouds.svg';\n  }\n\n  public render(gameState: GameState): void {\n    // Clear canvas\n    this.clear();\n\n    // Update background offset for parallax effect\n    this.backgroundOffset = gameState.cameraOffset;\n\n    // Draw layers from back to front\n    this.drawBackground();\n    this.drawParallaxStars(gameState.cameraOffset);\n    this.drawParallaxClouds(gameState.cameraOffset);\n    this.drawGround(gameState.cameraOffset);\n\n    // Draw game objects relative to camera\n    this.drawGameObjects(gameState);\n    this.drawPlayer(gameState.player, gameState.cameraOffset);\n  }\n\n  private clear(): void {\n    this.ctx.clearRect(0, 0, this.width, this.height);\n  }\n\n  private drawBackground(): void {\n    // Gradient sky background\n    const gradient = this.ctx.createLinearGradient(0, 0, 0, this.height);\n    gradient.addColorStop(0, this.colors.skyGradientTop);\n    gradient.addColorStop(1, this.colors.skyGradientBottom);\n\n    this.ctx.fillStyle = gradient;\n    this.ctx.fillRect(0, 0, this.width, this.height);\n  }\n\n  private drawParallaxStars(cameraOffset: number): void {\n    if (!this.starsImage || !this.starsImage.complete) return;\n\n    // Parallax speed - slower than camera (depth effect)\n    const parallaxSpeed = 0.2;\n    const offset = -(cameraOffset * parallaxSpeed) % this.starsImage.width;\n\n    this.ctx.globalAlpha = 0.7;\n\n    // Draw stars tiled across the screen\n    for (let x = offset - this.starsImage.width; x < this.width; x += this.starsImage.width) {\n      this.ctx.drawImage(\n        this.starsImage,\n        x,\n        0,\n        this.starsImage.width,\n        this.starsImage.height\n      );\n    }\n\n    this.ctx.globalAlpha = 1.0;\n  }\n\n  private drawParallaxClouds(cameraOffset: number): void {\n    if (!this.cloudsImage || !this.cloudsImage.complete) return;\n\n    // Parallax speed - medium speed for mid-ground\n    const parallaxSpeed = 0.4;\n    const offset = -(cameraOffset * parallaxSpeed) % this.cloudsImage.width;\n\n    this.ctx.globalAlpha = 0.5;\n\n    // Draw clouds tiled across the screen\n    for (let x = offset - this.cloudsImage.width; x < this.width; x += this.cloudsImage.width) {\n      this.ctx.drawImage(\n        this.cloudsImage,\n        x,\n        this.height * 0.15, // Position clouds in upper portion\n        this.cloudsImage.width,\n        this.cloudsImage.height * 0.6 // Scale down height\n      );\n    }\n\n    this.ctx.globalAlpha = 1.0;\n  }\n\n  private drawGround(cameraOffset: number): void {\n    const groundHeight = 100;\n    const groundY = this.height - groundHeight;\n\n    // Draw ground with pattern\n    this.ctx.fillStyle = this.colors.ground;\n    this.ctx.fillRect(0, groundY, this.width, groundHeight);\n\n    // Add grid pattern to ground\n    this.ctx.strokeStyle = this.colors.groundDark;\n    this.ctx.lineWidth = 2;\n\n    const gridSize = 50;\n    const offset = cameraOffset % gridSize;\n\n    // Vertical lines\n    for (let x = -offset; x < this.width; x += gridSize) {\n      this.ctx.beginPath();\n      this.ctx.moveTo(x, groundY);\n      this.ctx.lineTo(x, this.height);\n      this.ctx.stroke();\n    }\n\n    // Horizontal lines\n    for (let y = groundY; y < this.height; y += gridSize) {\n      this.ctx.beginPath();\n      this.ctx.moveTo(0, y);\n      this.ctx.lineTo(this.width, y);\n      this.ctx.stroke();\n    }\n\n    // Top border glow\n    this.ctx.strokeStyle = this.colors.platformGlow;\n    this.ctx.lineWidth = 3;\n    this.ctx.shadowBlur = 15;\n    this.ctx.shadowColor = this.colors.platformGlow;\n    this.ctx.beginPath();\n    this.ctx.moveTo(0, groundY);\n    this.ctx.lineTo(this.width, groundY);\n    this.ctx.stroke();\n    this.ctx.shadowBlur = 0;\n  }\n\n  private drawGameObjects(gameState: GameState): void {\n    const { gameObjects, cameraOffset } = gameState;\n\n    gameObjects.forEach(obj => {\n      if (!obj.active) return;\n\n      // Only draw objects that are visible on screen\n      const screenX = obj.position.x - cameraOffset;\n      if (screenX < -obj.size.x - 100 || screenX > this.width + 100) {\n        return;\n      }\n\n      switch (obj.type) {\n        case GameObjectType.OBSTACLE_SPIKE:\n        case GameObjectType.OBSTACLE_BLOCK:\n          this.drawObstacle(obj as Obstacle, cameraOffset);\n          break;\n        case GameObjectType.PLATFORM:\n          this.drawPlatform(obj as Platform, cameraOffset);\n          break;\n        case GameObjectType.COLLECTIBLE:\n          this.drawCollectible(obj, cameraOffset);\n          break;\n        case GameObjectType.PORTAL:\n          this.drawPortal(obj, cameraOffset);\n          break;\n      }\n    });\n  }\n\n  private drawPlayer(player: Player, cameraOffset: number): void {\n    const screenX = player.position.x - cameraOffset;\n    const screenY = player.position.y;\n\n    this.ctx.save();\n\n    // Translate to player position\n    this.ctx.translate(screenX + player.size.x / 2, screenY + player.size.y / 2);\n\n    // Rotate based on velocity (adds dynamic feel)\n    const rotation = player.velocity.y * 0.05;\n    this.ctx.rotate(rotation);\n\n    // Draw glow effect\n    this.ctx.shadowBlur = 20;\n    this.ctx.shadowColor = this.colors.playerGlow;\n\n    // Draw player as cube (Geometry Dash style)\n    this.ctx.fillStyle = this.colors.player;\n    this.ctx.fillRect(\n      -player.size.x / 2,\n      -player.size.y / 2,\n      player.size.x,\n      player.size.y\n    );\n\n    // Draw inner detail\n    this.ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';\n    this.ctx.fillRect(\n      -player.size.x / 2 + 5,\n      -player.size.y / 2 + 5,\n      player.size.x - 10,\n      player.size.y - 10\n    );\n\n    // Draw border\n    this.ctx.strokeStyle = '#ffffff';\n    this.ctx.lineWidth = 2;\n    this.ctx.strokeRect(\n      -player.size.x / 2,\n      -player.size.y / 2,\n      player.size.x,\n      player.size.y\n    );\n\n    this.ctx.restore();\n\n    // Draw trail effect when moving fast\n    if (Math.abs(player.velocity.x) > 3) {\n      this.drawPlayerTrail(screenX, screenY, player.size);\n    }\n  }\n\n  private drawPlayerTrail(x: number, y: number, size: Vector2D): void {\n    const trailLength = 3;\n\n    for (let i = 0; i < trailLength; i++) {\n      const alpha = 0.2 - (i * 0.05);\n      const offset = (i + 1) * 10;\n\n      this.ctx.fillStyle = `rgba(0, 242, 255, ${alpha})`;\n      this.ctx.fillRect(\n        x - offset,\n        y,\n        size.x,\n        size.y\n      );\n    }\n  }\n\n  private drawObstacle(obstacle: Obstacle, cameraOffset: number): void {\n    const screenX = obstacle.position.x - cameraOffset;\n    const screenY = obstacle.position.y;\n\n    this.ctx.save();\n\n    if (obstacle.type === GameObjectType.OBSTACLE_SPIKE) {\n      this.drawSpike(screenX, screenY, obstacle.size);\n    } else {\n      this.drawBlock(screenX, screenY, obstacle.size);\n    }\n\n    this.ctx.restore();\n  }\n\n  private drawSpike(x: number, y: number, size: Vector2D): void {\n    // Draw glow\n    this.ctx.shadowBlur = 15;\n    this.ctx.shadowColor = this.colors.obstacleGlow;\n\n    // Draw triangle spike\n    this.ctx.fillStyle = this.colors.obstacle;\n    this.ctx.beginPath();\n    this.ctx.moveTo(x + size.x / 2, y); // Top point\n    this.ctx.lineTo(x + size.x, y + size.y); // Bottom right\n    this.ctx.lineTo(x, y + size.y); // Bottom left\n    this.ctx.closePath();\n    this.ctx.fill();\n\n    // Draw border\n    this.ctx.strokeStyle = '#ff3399';\n    this.ctx.lineWidth = 2;\n    this.ctx.stroke();\n\n    this.ctx.shadowBlur = 0;\n  }\n\n  private drawBlock(x: number, y: number, size: Vector2D): void {\n    // Draw glow\n    this.ctx.shadowBlur = 15;\n    this.ctx.shadowColor = this.colors.obstacleGlow;\n\n    // Draw block\n    this.ctx.fillStyle = this.colors.obstacle;\n    this.ctx.fillRect(x, y, size.x, size.y);\n\n    // Draw pattern\n    this.ctx.strokeStyle = '#ff3399';\n    this.ctx.lineWidth = 2;\n    this.ctx.beginPath();\n    this.ctx.moveTo(x, y);\n    this.ctx.lineTo(x + size.x, y + size.y);\n    this.ctx.moveTo(x + size.x, y);\n    this.ctx.lineTo(x, y + size.y);\n    this.ctx.stroke();\n\n    // Draw border\n    this.ctx.strokeRect(x, y, size.x, size.y);\n\n    this.ctx.shadowBlur = 0;\n  }\n\n  private drawPlatform(platform: Platform, cameraOffset: number): void {\n    const screenX = platform.position.x - cameraOffset;\n    const screenY = platform.position.y;\n\n    // Draw glow\n    this.ctx.shadowBlur = 10;\n    this.ctx.shadowColor = this.colors.platformGlow;\n\n    // Draw platform\n    this.ctx.fillStyle = this.colors.platform;\n    this.ctx.fillRect(screenX, screenY, platform.width, platform.size.y);\n\n    // Draw top highlight\n    this.ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';\n    this.ctx.fillRect(screenX, screenY, platform.width, 5);\n\n    // Draw border\n    this.ctx.strokeStyle = this.colors.platformGlow;\n    this.ctx.lineWidth = 2;\n    this.ctx.strokeRect(screenX, screenY, platform.width, platform.size.y);\n\n    this.ctx.shadowBlur = 0;\n  }\n\n  private drawCollectible(obj: GameObject, cameraOffset: number): void {\n    const screenX = obj.position.x - cameraOffset;\n    const screenY = obj.position.y;\n    const centerX = screenX + obj.size.x / 2;\n    const centerY = screenY + obj.size.y / 2;\n    const radius = obj.size.x / 2;\n\n    // Pulsing effect\n    const pulse = Math.sin(Date.now() * 0.005) * 0.2 + 1;\n\n    this.ctx.save();\n    this.ctx.translate(centerX, centerY);\n    this.ctx.scale(pulse, pulse);\n\n    // Draw glow\n    this.ctx.shadowBlur = 20;\n    this.ctx.shadowColor = this.colors.collectible;\n\n    // Draw star/coin\n    this.ctx.fillStyle = this.colors.collectible;\n    this.ctx.beginPath();\n    this.ctx.arc(0, 0, radius, 0, Math.PI * 2);\n    this.ctx.fill();\n\n    // Draw inner detail\n    this.ctx.fillStyle = '#ffffff';\n    this.ctx.beginPath();\n    this.ctx.arc(0, 0, radius * 0.5, 0, Math.PI * 2);\n    this.ctx.fill();\n\n    this.ctx.restore();\n    this.ctx.shadowBlur = 0;\n  }\n\n  private drawPortal(obj: GameObject, cameraOffset: number): void {\n    const screenX = obj.position.x - cameraOffset;\n    const screenY = obj.position.y;\n\n    // Animated portal effect\n    const time = Date.now() * 0.001;\n\n    this.ctx.save();\n\n    // Draw outer glow\n    this.ctx.shadowBlur = 30;\n    this.ctx.shadowColor = this.colors.portal;\n\n    // Draw portal frame\n    this.ctx.strokeStyle = this.colors.portal;\n    this.ctx.lineWidth = 5;\n    this.ctx.strokeRect(screenX, screenY, obj.size.x, obj.size.y);\n\n    // Draw animated swirl inside\n    this.ctx.globalAlpha = 0.5;\n    const centerX = screenX + obj.size.x / 2;\n    const centerY = screenY + obj.size.y / 2;\n\n    for (let i = 0; i < 3; i++) {\n      const angle = time + (i * Math.PI * 2 / 3);\n      const x = centerX + Math.cos(angle) * 15;\n      const y = centerY + Math.sin(angle) * 15;\n\n      this.ctx.fillStyle = this.colors.portal;\n      this.ctx.beginPath();\n      this.ctx.arc(x, y, 5, 0, Math.PI * 2);\n      this.ctx.fill();\n    }\n\n    this.ctx.restore();\n    this.ctx.shadowBlur = 0;\n  }\n\n  public resize(width: number, height: number): void {\n    this.width = width;\n    this.height = height;\n    this.setupCanvas();\n  }\n\n  public destroy(): void {\n    // Cleanup if needed\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1192, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/systems/index.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/systems/index.ts"],"sourcesContent":["// Main exports for game systems\n\nexport { Renderer } from './Renderer';\nexport type { RenderConfig } from './Renderer';\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;AAEhC,IAAA,mCAAsC;AAA7B,OAAA,cAAA,CAAA,SAAA,YAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,WAAA,QAAQ;IAAA;AAAA,GAAA"}},
    {"offset": {"line": 1211, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/levels/SegmentTemplates.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/levels/SegmentTemplates.ts"],"sourcesContent":["/**\n * Segment Templates - Reusable level segment patterns\n *\n * These templates serve dual purposes:\n * 1. Procedural generation building blocks\n * 2. Training data for ML models to learn obstacle patterns\n *\n * ML Integration Notes:\n * - Each template is encoded with numerical features that ML models can learn\n * - Templates can be used to generate synthetic training data\n * - Feature vectors can be extracted for supervised/reinforcement learning\n */\n\nimport { LevelSegment, GameObject, GameObjectType, Vector2D } from '../types';\n\n/**\n * Numerical feature encoding for ML training\n * These features describe a segment in a way ML models can process\n */\nexport interface SegmentFeatures {\n  difficulty: number;           // 0-1 scale\n  density: number;              // Obstacles per unit length\n  verticalComplexity: number;   // Height variation measure\n  gapFrequency: number;         // Number of gaps/jumps\n  platformRatio: number;        // Platform coverage ratio\n  obstacleTypes: number[];      // One-hot encoding of obstacle types\n  rhythmPattern: number[];      // Temporal spacing pattern\n}\n\n/**\n * Template definition with ML-ready features\n */\nexport interface SegmentTemplate {\n  name: string;\n  difficulty: number;\n  length: number;\n  features: SegmentFeatures;\n  generator: (startX: number, seed: number) => GameObject[];\n}\n\n/**\n * Generate a unique ID for game objects\n */\nfunction generateId(prefix: string, index: number, seed: number): string {\n  return `${prefix}_${seed}_${index}_${Date.now()}`;\n}\n\n/**\n * Seeded random number generator (for reproducibility)\n */\nclass SeededRandom {\n  private seed: number;\n\n  constructor(seed: number) {\n    this.seed = seed;\n  }\n\n  next(): number {\n    this.seed = (this.seed * 9301 + 49297) % 233280;\n    return this.seed / 233280;\n  }\n\n  range(min: number, max: number): number {\n    return min + this.next() * (max - min);\n  }\n\n  integer(min: number, max: number): number {\n    return Math.floor(this.range(min, max + 1));\n  }\n}\n\n// ============================================================================\n// BASIC TEMPLATES (Difficulty 0.1 - 0.3)\n// ============================================================================\n\nexport const FLAT_GROUND_SPIKE: SegmentTemplate = {\n  name: 'flat_ground_spike',\n  difficulty: 0.1,\n  length: 100,\n  features: {\n    difficulty: 0.1,\n    density: 0.3,\n    verticalComplexity: 0.1,\n    gapFrequency: 0,\n    platformRatio: 1.0,\n    obstacleTypes: [1, 0, 0], // [spike, block, gap]\n    rhythmPattern: [0, 0, 1, 0, 0, 1], // Regular spacing\n  },\n  generator: (startX: number, seed: number): GameObject[] => {\n    const rng = new SeededRandom(seed);\n    const objects: GameObject[] = [];\n    const groundY = 500;\n    const segmentLength = 100;\n\n    // Ground platform\n    objects.push({\n      id: generateId('platform', 0, seed),\n      position: { x: startX, y: groundY },\n      velocity: { x: 0, y: 0 },\n      size: { x: segmentLength, y: 20 },\n      type: GameObjectType.PLATFORM,\n      active: true,\n    });\n\n    // Simple spike pattern\n    const spikePositions = [30, 60];\n    spikePositions.forEach((offset, idx) => {\n      objects.push({\n        id: generateId('spike', idx, seed),\n        position: { x: startX + offset, y: groundY - 20 },\n        velocity: { x: 0, y: 0 },\n        size: { x: 15, y: 20 },\n        type: GameObjectType.OBSTACLE_SPIKE,\n        active: true,\n      });\n    });\n\n    return objects;\n  },\n};\n\nexport const SIMPLE_GAP: SegmentTemplate = {\n  name: 'simple_gap',\n  difficulty: 0.2,\n  length: 120,\n  features: {\n    difficulty: 0.2,\n    density: 0.1,\n    verticalComplexity: 0.2,\n    gapFrequency: 1,\n    platformRatio: 0.7,\n    obstacleTypes: [0, 0, 1], // Gap-based\n    rhythmPattern: [1, 0, 0, 0, 1],\n  },\n  generator: (startX: number, seed: number): GameObject[] => {\n    const objects: GameObject[] = [];\n    const groundY = 500;\n    const gapWidth = 40;\n    const platformWidth = 40;\n\n    // Left platform\n    objects.push({\n      id: generateId('platform', 0, seed),\n      position: { x: startX, y: groundY },\n      velocity: { x: 0, y: 0 },\n      size: { x: platformWidth, y: 20 },\n      type: GameObjectType.PLATFORM,\n      active: true,\n    });\n\n    // Right platform\n    objects.push({\n      id: generateId('platform', 1, seed),\n      position: { x: startX + platformWidth + gapWidth, y: groundY },\n      velocity: { x: 0, y: 0 },\n      size: { x: platformWidth, y: 20 },\n      type: GameObjectType.PLATFORM,\n      active: true,\n    });\n\n    return objects;\n  },\n};\n\n// ============================================================================\n// INTERMEDIATE TEMPLATES (Difficulty 0.4 - 0.6)\n// ============================================================================\n\nexport const STAIRCASE_BLOCKS: SegmentTemplate = {\n  name: 'staircase_blocks',\n  difficulty: 0.4,\n  length: 150,\n  features: {\n    difficulty: 0.4,\n    density: 0.5,\n    verticalComplexity: 0.6,\n    gapFrequency: 0,\n    platformRatio: 0.8,\n    obstacleTypes: [0, 1, 0], // Block-based\n    rhythmPattern: [1, 1, 1, 1, 1],\n  },\n  generator: (startX: number, seed: number): GameObject[] => {\n    const objects: GameObject[] = [];\n    const groundY = 500;\n    const blockSize = 30;\n    const steps = 5;\n\n    // Ground platform\n    objects.push({\n      id: generateId('platform', 0, seed),\n      position: { x: startX, y: groundY },\n      velocity: { x: 0, y: 0 },\n      size: { x: 150, y: 20 },\n      type: GameObjectType.PLATFORM,\n      active: true,\n    });\n\n    // Staircase blocks\n    for (let i = 0; i < steps; i++) {\n      objects.push({\n        id: generateId('block', i, seed),\n        position: {\n          x: startX + 20 + i * blockSize,\n          y: groundY - 20 - (i + 1) * blockSize\n        },\n        velocity: { x: 0, y: 0 },\n        size: { x: blockSize, y: blockSize },\n        type: GameObjectType.OBSTACLE_BLOCK,\n        active: true,\n      });\n    }\n\n    return objects;\n  },\n};\n\nexport const SPIKE_RHYTHM: SegmentTemplate = {\n  name: 'spike_rhythm',\n  difficulty: 0.5,\n  length: 160,\n  features: {\n    difficulty: 0.5,\n    density: 0.7,\n    verticalComplexity: 0.3,\n    gapFrequency: 0,\n    platformRatio: 1.0,\n    obstacleTypes: [1, 0, 0], // Spike-heavy\n    rhythmPattern: [1, 0, 1, 1, 0, 1], // Syncopated rhythm\n  },\n  generator: (startX: number, seed: number): GameObject[] => {\n    const rng = new SeededRandom(seed);\n    const objects: GameObject[] = [];\n    const groundY = 500;\n\n    // Ground platform\n    objects.push({\n      id: generateId('platform', 0, seed),\n      position: { x: startX, y: groundY },\n      velocity: { x: 0, y: 0 },\n      size: { x: 160, y: 20 },\n      type: GameObjectType.PLATFORM,\n      active: true,\n    });\n\n    // Rhythmic spike pattern - short-short-long pattern\n    const pattern = [20, 40, 60, 80, 120, 140];\n    pattern.forEach((offset, idx) => {\n      objects.push({\n        id: generateId('spike', idx, seed),\n        position: { x: startX + offset, y: groundY - 20 },\n        velocity: { x: 0, y: 0 },\n        size: { x: 15, y: 20 },\n        type: GameObjectType.OBSTACLE_SPIKE,\n        active: true,\n      });\n    });\n\n    return objects;\n  },\n};\n\nexport const PLATFORM_JUMPS: SegmentTemplate = {\n  name: 'platform_jumps',\n  difficulty: 0.6,\n  length: 180,\n  features: {\n    difficulty: 0.6,\n    density: 0.4,\n    verticalComplexity: 0.7,\n    gapFrequency: 3,\n    platformRatio: 0.5,\n    obstacleTypes: [0, 0, 1], // Gap-heavy\n    rhythmPattern: [1, 0, 0, 1, 0, 0],\n  },\n  generator: (startX: number, seed: number): GameObject[] => {\n    const rng = new SeededRandom(seed);\n    const objects: GameObject[] = [];\n    const groundY = 500;\n\n    // Multiple platforms at varying heights\n    const platforms = [\n      { x: 0, y: 0, width: 40 },\n      { x: 60, y: -30, width: 30 },\n      { x: 110, y: -60, width: 35 },\n      { x: 160, y: -30, width: 40 },\n    ];\n\n    platforms.forEach((plat, idx) => {\n      objects.push({\n        id: generateId('platform', idx, seed),\n        position: { x: startX + plat.x, y: groundY + plat.y },\n        velocity: { x: 0, y: 0 },\n        size: { x: plat.width, y: 20 },\n        type: GameObjectType.PLATFORM,\n        active: true,\n      });\n\n      // Add spike on some platforms\n      if (rng.next() > 0.5) {\n        objects.push({\n          id: generateId('spike', idx, seed),\n          position: { x: startX + plat.x + plat.width / 2, y: groundY + plat.y - 20 },\n          velocity: { x: 0, y: 0 },\n          size: { x: 15, y: 20 },\n          type: GameObjectType.OBSTACLE_SPIKE,\n          active: true,\n        });\n      }\n    });\n\n    return objects;\n  },\n};\n\n// ============================================================================\n// ADVANCED TEMPLATES (Difficulty 0.7 - 1.0)\n// ============================================================================\n\nexport const MIXED_OBSTACLES: SegmentTemplate = {\n  name: 'mixed_obstacles',\n  difficulty: 0.7,\n  length: 200,\n  features: {\n    difficulty: 0.7,\n    density: 0.8,\n    verticalComplexity: 0.8,\n    gapFrequency: 2,\n    platformRatio: 0.6,\n    obstacleTypes: [0.5, 0.5, 0.3], // Mixed\n    rhythmPattern: [1, 1, 0, 1, 0, 1],\n  },\n  generator: (startX: number, seed: number): GameObject[] => {\n    const rng = new SeededRandom(seed);\n    const objects: GameObject[] = [];\n    const groundY = 500;\n\n    // Main platform\n    objects.push({\n      id: generateId('platform', 0, seed),\n      position: { x: startX, y: groundY },\n      velocity: { x: 0, y: 0 },\n      size: { x: 80, y: 20 },\n      type: GameObjectType.PLATFORM,\n      active: true,\n    });\n\n    // Blocks and spikes on ground\n    objects.push({\n      id: generateId('block', 0, seed),\n      position: { x: startX + 30, y: groundY - 20 },\n      velocity: { x: 0, y: 0 },\n      size: { x: 25, y: 25 },\n      type: GameObjectType.OBSTACLE_BLOCK,\n      active: true,\n    });\n\n    objects.push({\n      id: generateId('spike', 0, seed),\n      position: { x: startX + 60, y: groundY - 20 },\n      velocity: { x: 0, y: 0 },\n      size: { x: 15, y: 20 },\n      type: GameObjectType.OBSTACLE_SPIKE,\n      active: true,\n    });\n\n    // Gap\n    // Elevated platform\n    objects.push({\n      id: generateId('platform', 1, seed),\n      position: { x: startX + 120, y: groundY - 40 },\n      velocity: { x: 0, y: 0 },\n      size: { x: 50, y: 20 },\n      type: GameObjectType.PLATFORM,\n      active: true,\n    });\n\n    // Spike on elevated platform\n    objects.push({\n      id: generateId('spike', 1, seed),\n      position: { x: startX + 145, y: groundY - 60 },\n      velocity: { x: 0, y: 0 },\n      size: { x: 15, y: 20 },\n      type: GameObjectType.OBSTACLE_SPIKE,\n      active: true,\n    });\n\n    // Final platform\n    objects.push({\n      id: generateId('platform', 2, seed),\n      position: { x: startX + 180, y: groundY },\n      velocity: { x: 0, y: 0 },\n      size: { x: 50, y: 20 },\n      type: GameObjectType.PLATFORM,\n      active: true,\n    });\n\n    return objects;\n  },\n};\n\nexport const EXTREME_CHALLENGE: SegmentTemplate = {\n  name: 'extreme_challenge',\n  difficulty: 0.9,\n  length: 250,\n  features: {\n    difficulty: 0.9,\n    density: 1.0,\n    verticalComplexity: 1.0,\n    gapFrequency: 4,\n    platformRatio: 0.4,\n    obstacleTypes: [0.7, 0.6, 0.5], // All types heavily used\n    rhythmPattern: [1, 1, 1, 0, 1, 1],\n  },\n  generator: (startX: number, seed: number): GameObject[] => {\n    const rng = new SeededRandom(seed);\n    const objects: GameObject[] = [];\n    const groundY = 500;\n\n    // Create a complex multi-level challenge\n    const platformConfigs = [\n      { x: 0, y: 0, width: 30, hasSpike: false, hasBlock: true },\n      { x: 50, y: -50, width: 25, hasSpike: true, hasBlock: false },\n      { x: 95, y: -100, width: 20, hasSpike: true, hasBlock: false },\n      { x: 135, y: -70, width: 25, hasSpike: false, hasBlock: true },\n      { x: 180, y: -40, width: 30, hasSpike: true, hasBlock: false },\n      { x: 230, y: 0, width: 35, hasSpike: false, hasBlock: false },\n    ];\n\n    platformConfigs.forEach((config, idx) => {\n      // Platform\n      objects.push({\n        id: generateId('platform', idx, seed),\n        position: { x: startX + config.x, y: groundY + config.y },\n        velocity: { x: 0, y: 0 },\n        size: { x: config.width, y: 20 },\n        type: GameObjectType.PLATFORM,\n        active: true,\n      });\n\n      // Spike\n      if (config.hasSpike) {\n        objects.push({\n          id: generateId('spike', idx, seed),\n          position: {\n            x: startX + config.x + config.width / 2,\n            y: groundY + config.y - 20\n          },\n          velocity: { x: 0, y: 0 },\n          size: { x: 15, y: 20 },\n          type: GameObjectType.OBSTACLE_SPIKE,\n          active: true,\n        });\n      }\n\n      // Block\n      if (config.hasBlock) {\n        objects.push({\n          id: generateId('block', idx, seed),\n          position: {\n            x: startX + config.x + 5,\n            y: groundY + config.y - 25\n          },\n          velocity: { x: 0, y: 0 },\n          size: { x: 20, y: 25 },\n          type: GameObjectType.OBSTACLE_BLOCK,\n          active: true,\n        });\n      }\n    });\n\n    return objects;\n  },\n};\n\n// ============================================================================\n// TEMPLATE REGISTRY\n// ============================================================================\n\n/**\n * All available templates organized by difficulty\n * ML models can use this for training data generation\n */\nexport const TEMPLATE_REGISTRY = {\n  easy: [FLAT_GROUND_SPIKE, SIMPLE_GAP],\n  medium: [STAIRCASE_BLOCKS, SPIKE_RHYTHM, PLATFORM_JUMPS],\n  hard: [MIXED_OBSTACLES],\n  extreme: [EXTREME_CHALLENGE],\n};\n\n/**\n * Get all templates as a flat array\n */\nexport function getAllTemplates(): SegmentTemplate[] {\n  return [\n    ...TEMPLATE_REGISTRY.easy,\n    ...TEMPLATE_REGISTRY.medium,\n    ...TEMPLATE_REGISTRY.hard,\n    ...TEMPLATE_REGISTRY.extreme,\n  ];\n}\n\n/**\n * Get templates filtered by difficulty range\n */\nexport function getTemplatesByDifficulty(minDiff: number, maxDiff: number): SegmentTemplate[] {\n  return getAllTemplates().filter(\n    t => t.difficulty >= minDiff && t.difficulty <= maxDiff\n  );\n}\n\n/**\n * Extract feature vector from a template (for ML training)\n * Returns a normalized feature array that can be fed to ML models\n */\nexport function extractFeatureVector(template: SegmentTemplate): number[] {\n  const features = template.features;\n  return [\n    features.difficulty,\n    features.density,\n    features.verticalComplexity,\n    features.gapFrequency,\n    features.platformRatio,\n    ...features.obstacleTypes,\n    ...features.rhythmPattern,\n  ];\n}\n\n/**\n * Generate synthetic training data from templates\n * Useful for creating datasets for ML model training\n */\nexport function generateTrainingData(\n  template: SegmentTemplate,\n  numSamples: number\n): Array<{ features: number[]; template: string }> {\n  const samples = [];\n  for (let i = 0; i < numSamples; i++) {\n    samples.push({\n      features: extractFeatureVector(template),\n      template: template.name,\n    });\n  }\n  return samples;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1990, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/levels/ProceduralGenerator.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/levels/ProceduralGenerator.ts"],"sourcesContent":["/**\n * Procedural Generator - Algorithm-based level generation\n *\n * This module contains procedural algorithms for generating levels.\n * In the ML-ready architecture, these algorithms serve as:\n * 1. Baseline generation methods\n * 2. Fallback when ML models are unavailable\n * 3. Data augmentation for ML training\n *\n * The procedural approach uses mathematical rules and randomness,\n * while ML approaches will learn patterns from data.\n */\n\nimport {\n  LevelSegment,\n  GameObject,\n  LevelGeneratorConfig,\n  LevelConstraints,\n} from '../types';\nimport {\n  SegmentTemplate,\n  getAllTemplates,\n  getTemplatesByDifficulty,\n} from './SegmentTemplates';\n\n/**\n * Seeded random number generator for reproducible generation\n */\nexport class SeededRandom {\n  private seed: number;\n\n  constructor(seed: number) {\n    this.seed = seed;\n  }\n\n  next(): number {\n    this.seed = (this.seed * 9301 + 49297) % 233280;\n    return this.seed / 233280;\n  }\n\n  range(min: number, max: number): number {\n    return min + this.next() * (max - min);\n  }\n\n  integer(min: number, max: number): number {\n    return Math.floor(this.range(min, max + 1));\n  }\n\n  choice<T>(array: T[]): T {\n    return array[this.integer(0, array.length - 1)];\n  }\n}\n\n/**\n * Procedural generation strategy interface\n * Different strategies can be swapped in/out\n */\nexport interface GenerationStrategy {\n  name: string;\n  generate(config: LevelGeneratorConfig, rng: SeededRandom): LevelSegment[];\n}\n\n/**\n * Template-based generation strategy\n * Selects and chains pre-made templates based on difficulty\n */\nexport class TemplateBasedStrategy implements GenerationStrategy {\n  name = 'template_based';\n\n  generate(config: LevelGeneratorConfig, rng: SeededRandom): LevelSegment[] {\n    const segments: LevelSegment[] = [];\n    let currentX = 0;\n    const targetLength = config.length;\n\n    // Calculate difficulty variance (allows some easier/harder sections)\n    const difficultyVariance = 0.2;\n\n    while (currentX < targetLength) {\n      // Sample difficulty with some variance for variety\n      const segmentDifficulty = Math.max(\n        0,\n        Math.min(\n          1,\n          config.difficulty + rng.range(-difficultyVariance, difficultyVariance)\n        )\n      );\n\n      // Get appropriate templates for this difficulty\n      const minDiff = Math.max(0, segmentDifficulty - 0.2);\n      const maxDiff = Math.min(1, segmentDifficulty + 0.2);\n      const suitableTemplates = getTemplatesByDifficulty(minDiff, maxDiff);\n\n      if (suitableTemplates.length === 0) {\n        // Fallback to all templates if no suitable ones found\n        const template = rng.choice(getAllTemplates());\n        const segment = this.createSegmentFromTemplate(\n          template,\n          currentX,\n          rng.integer(0, 1000000)\n        );\n        segments.push(segment);\n        currentX += segment.length;\n      } else {\n        // Choose a random suitable template\n        const template = rng.choice(suitableTemplates);\n        const segment = this.createSegmentFromTemplate(\n          template,\n          currentX,\n          rng.integer(0, 1000000)\n        );\n        segments.push(segment);\n        currentX += segment.length;\n      }\n    }\n\n    return segments;\n  }\n\n  private createSegmentFromTemplate(\n    template: SegmentTemplate,\n    startX: number,\n    seed: number\n  ): LevelSegment {\n    return {\n      id: `segment_${seed}_${startX}`,\n      startX,\n      length: template.length,\n      difficulty: template.difficulty,\n      objects: template.generator(startX, seed),\n      metadata: {\n        templateName: template.name,\n        generationMethod: 'template_based',\n        features: template.features,\n      },\n    };\n  }\n}\n\n/**\n * Noise-based procedural generation\n * Uses mathematical noise functions to create organic patterns\n * This simulates what an ML model might learn - continuous patterns\n */\nexport class NoiseBasedStrategy implements GenerationStrategy {\n  name = 'noise_based';\n\n  generate(config: LevelGeneratorConfig, rng: SeededRandom): LevelSegment[] {\n    const segments: LevelSegment[] = [];\n    const segmentLength = 150;\n    const numSegments = Math.ceil(config.length / segmentLength);\n\n    for (let i = 0; i < numSegments; i++) {\n      const startX = i * segmentLength;\n      const segment = this.generateNoiseSegment(\n        startX,\n        segmentLength,\n        config,\n        rng,\n        i\n      );\n      segments.push(segment);\n    }\n\n    return segments;\n  }\n\n  private generateNoiseSegment(\n    startX: number,\n    length: number,\n    config: LevelGeneratorConfig,\n    rng: SeededRandom,\n    index: number\n  ): LevelSegment {\n    const objects: GameObject[] = [];\n    const groundY = 500;\n\n    // Create base platform\n    objects.push({\n      id: `platform_noise_${index}_${startX}`,\n      position: { x: startX, y: groundY },\n      velocity: { x: 0, y: 0 },\n      size: { x: length, y: 20 },\n      type: 'platform' as any,\n      active: true,\n    });\n\n    // Use perlin-like noise to determine obstacle placement\n    const obstacleCount = Math.floor(config.difficulty * 10 + rng.range(0, 3));\n\n    for (let j = 0; j < obstacleCount; j++) {\n      const xOffset = (j / obstacleCount) * length + rng.range(-10, 10);\n      const noiseValue = this.noise(startX + xOffset, index);\n\n      // Decide obstacle type based on noise value\n      if (noiseValue < 0.33) {\n        // Spike\n        objects.push({\n          id: `spike_noise_${index}_${j}`,\n          position: { x: startX + xOffset, y: groundY - 20 },\n          velocity: { x: 0, y: 0 },\n          size: { x: 15, y: 20 },\n          type: 'obstacle_spike' as any,\n          active: true,\n        });\n      } else if (noiseValue < 0.66) {\n        // Block\n        const blockHeight = 20 + config.difficulty * 30;\n        objects.push({\n          id: `block_noise_${index}_${j}`,\n          position: { x: startX + xOffset, y: groundY - blockHeight },\n          velocity: { x: 0, y: 0 },\n          size: { x: 25, y: blockHeight },\n          type: 'obstacle_block' as any,\n          active: true,\n        });\n      }\n      // else: gap (no obstacle)\n    }\n\n    // Calculate feature metrics for this segment\n    const spikeCount = objects.filter(o => o.type === 'obstacle_spike').length;\n    const blockCount = objects.filter(o => o.type === 'obstacle_block').length;\n    const density = (spikeCount + blockCount) / length;\n\n    return {\n      id: `segment_noise_${index}_${startX}`,\n      startX,\n      length,\n      difficulty: config.difficulty,\n      objects,\n      metadata: {\n        generationMethod: 'noise_based',\n        features: {\n          difficulty: config.difficulty,\n          density,\n          verticalComplexity: config.difficulty * 0.6,\n          gapFrequency: 0,\n          platformRatio: 1.0,\n          obstacleTypes: [spikeCount / 10, blockCount / 10, 0],\n        },\n      },\n    };\n  }\n\n  /**\n   * Simple noise function (simplified Perlin noise)\n   * Returns value between 0 and 1\n   */\n  private noise(x: number, seed: number): number {\n    const n = Math.sin(x * 0.01 + seed) * Math.cos(x * 0.02 - seed);\n    return (n + 1) / 2; // Normalize to 0-1\n  }\n}\n\n/**\n * Wave-based generation strategy\n * Creates rhythmic patterns similar to music-synced levels\n */\nexport class WaveBasedStrategy implements GenerationStrategy {\n  name = 'wave_based';\n\n  generate(config: LevelGeneratorConfig, rng: SeededRandom): LevelSegment[] {\n    const segments: LevelSegment[] = [];\n    const segmentLength = 120;\n    const numSegments = Math.ceil(config.length / segmentLength);\n\n    // Define wave parameters based on difficulty\n    const frequency = 0.5 + config.difficulty * 1.5; // Higher difficulty = higher frequency\n    const amplitude = config.difficulty;\n\n    for (let i = 0; i < numSegments; i++) {\n      const startX = i * segmentLength;\n      const segment = this.generateWaveSegment(\n        startX,\n        segmentLength,\n        frequency,\n        amplitude,\n        i,\n        rng\n      );\n      segments.push(segment);\n    }\n\n    return segments;\n  }\n\n  private generateWaveSegment(\n    startX: number,\n    length: number,\n    frequency: number,\n    amplitude: number,\n    index: number,\n    rng: SeededRandom\n  ): LevelSegment {\n    const objects: GameObject[] = [];\n    const groundY = 500;\n\n    // Base platform\n    objects.push({\n      id: `platform_wave_${index}_${startX}`,\n      position: { x: startX, y: groundY },\n      velocity: { x: 0, y: 0 },\n      size: { x: length, y: 20 },\n      type: 'platform' as any,\n      active: true,\n    });\n\n    // Generate obstacles in wave pattern\n    const obstacleSpacing = 20;\n    const numObstacles = Math.floor(length / obstacleSpacing);\n\n    for (let i = 0; i < numObstacles; i++) {\n      const xOffset = i * obstacleSpacing;\n      const waveValue = Math.sin((startX + xOffset) * frequency * 0.01);\n\n      // Wave determines if obstacle appears (threshold based on amplitude)\n      if (Math.abs(waveValue) > (1 - amplitude)) {\n        const obstacleType = waveValue > 0 ? 'spike' : 'block';\n\n        if (obstacleType === 'spike') {\n          objects.push({\n            id: `spike_wave_${index}_${i}`,\n            position: { x: startX + xOffset, y: groundY - 20 },\n            velocity: { x: 0, y: 0 },\n            size: { x: 15, y: 20 },\n            type: 'obstacle_spike' as any,\n            active: true,\n          });\n        } else {\n          objects.push({\n            id: `block_wave_${index}_${i}`,\n            position: { x: startX + xOffset, y: groundY - 25 },\n            velocity: { x: 0, y: 0 },\n            size: { x: 20, y: 25 },\n            type: 'obstacle_block' as any,\n            active: true,\n          });\n        }\n      }\n    }\n\n    return {\n      id: `segment_wave_${index}_${startX}`,\n      startX,\n      length,\n      difficulty: amplitude,\n      objects,\n      metadata: {\n        generationMethod: 'wave_based',\n        waveFrequency: frequency,\n        waveAmplitude: amplitude,\n      },\n    };\n  }\n}\n\n/**\n * Main procedural generator class\n * Coordinates different generation strategies\n */\nexport class ProceduralGenerator {\n  private strategies: Map<string, GenerationStrategy>;\n\n  constructor() {\n    this.strategies = new Map();\n    this.registerStrategy(new TemplateBasedStrategy());\n    this.registerStrategy(new NoiseBasedStrategy());\n    this.registerStrategy(new WaveBasedStrategy());\n  }\n\n  /**\n   * Register a new generation strategy\n   */\n  registerStrategy(strategy: GenerationStrategy): void {\n    this.strategies.set(strategy.name, strategy);\n  }\n\n  /**\n   * Generate level segments using specified strategy\n   */\n  generate(\n    config: LevelGeneratorConfig,\n    strategyName: string = 'template_based'\n  ): LevelSegment[] {\n    const strategy = this.strategies.get(strategyName);\n    if (!strategy) {\n      throw new Error(`Unknown generation strategy: ${strategyName}`);\n    }\n\n    const seed = config.seed ?? Math.floor(Math.random() * 1000000);\n    const rng = new SeededRandom(seed);\n\n    return strategy.generate(config, rng);\n  }\n\n  /**\n   * Generate using multiple strategies and blend results\n   * This creates more diverse levels by mixing approaches\n   */\n  generateBlended(\n    config: LevelGeneratorConfig,\n    strategyWeights: { [key: string]: number } = {\n      template_based: 0.7,\n      noise_based: 0.2,\n      wave_based: 0.1,\n    }\n  ): LevelSegment[] {\n    const seed = config.seed ?? Math.floor(Math.random() * 1000000);\n    const rng = new SeededRandom(seed);\n\n    // Determine which strategy to use for each segment based on weights\n    const totalWeight = Object.values(strategyWeights).reduce((a, b) => a + b, 0);\n    const normalizedWeights = Object.entries(strategyWeights).map(([name, weight]) => ({\n      name,\n      weight: weight / totalWeight,\n    }));\n\n    // Calculate cumulative probabilities\n    let cumulative = 0;\n    const strategyRanges = normalizedWeights.map(({ name, weight }) => {\n      const start = cumulative;\n      cumulative += weight;\n      return { name, start, end: cumulative };\n    });\n\n    // Select strategy based on random value\n    const random = rng.next();\n    const selectedStrategy = strategyRanges.find(\n      range => random >= range.start && random < range.end\n    );\n\n    if (!selectedStrategy) {\n      // Fallback to template_based\n      return this.generate(config, 'template_based');\n    }\n\n    return this.generate(config, selectedStrategy.name);\n  }\n\n  /**\n   * Get list of available strategies\n   */\n  getAvailableStrategies(): string[] {\n    return Array.from(this.strategies.keys());\n  }\n}\n\n/**\n * Utility functions for procedural generation\n */\n\n/**\n * Apply constraints to generated segments\n * Ensures generated content respects physical limits\n */\nexport function applyConstraints(\n  segments: LevelSegment[],\n  constraints?: LevelConstraints\n): LevelSegment[] {\n  if (!constraints) return segments;\n\n  return segments.map(segment => ({\n    ...segment,\n    objects: segment.objects.filter(obj => {\n      // Filter by max obstacle height\n      if (\n        constraints.maxObstacleHeight &&\n        (obj.type === 'obstacle_block' || obj.type === 'obstacle_spike')\n      ) {\n        if (obj.size.y > constraints.maxObstacleHeight) {\n          return false;\n        }\n      }\n\n      // Filter by min platform width\n      if (constraints.minPlatformWidth && obj.type === 'platform') {\n        if (obj.size.x < constraints.minPlatformWidth) {\n          return false;\n        }\n      }\n\n      return true;\n    }),\n  }));\n}\n\n/**\n * Analyze segment difficulty based on object patterns\n * This can be used to validate generated content\n */\nexport function analyzeSegmentDifficulty(segment: LevelSegment): number {\n  const objects = segment.objects;\n\n  const spikeCount = objects.filter(o => o.type === 'obstacle_spike').length;\n  const blockCount = objects.filter(o => o.type === 'obstacle_block').length;\n  const platformCount = objects.filter(o => o.type === 'platform').length;\n\n  // Calculate metrics\n  const obstacleDensity = (spikeCount + blockCount) / segment.length;\n  const platformCoverage = platformCount > 0 ? 1 : 0;\n\n  // Weighted difficulty score\n  const difficulty =\n    obstacleDensity * 0.6 +\n    (1 - platformCoverage) * 0.2 +\n    (blockCount / Math.max(spikeCount + blockCount, 1)) * 0.2;\n\n  return Math.min(1, difficulty);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2427, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/levels/LevelGenerator.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/levels/LevelGenerator.ts"],"sourcesContent":["/**\n * LevelGenerator - ML-Ready Level Generation System\n *\n * ARCHITECTURE OVERVIEW:\n * ======================\n * This is the main interface for level generation with a pluggable architecture\n * that supports both procedural algorithms and ML models.\n *\n * DESIGN PRINCIPLES:\n * 1. Strategy Pattern: Different generation methods (procedural, ML) implement\n *    a common interface\n * 2. Feature Extraction: All generated content includes numerical features that\n *    ML models can learn from\n * 3. Reproducibility: Seed-based generation ensures consistent outputs\n * 4. Modularity: Easy to swap procedural generation with ML models\n *\n * ML INTEGRATION ROADMAP:\n * =======================\n * Phase 1 (Current): Procedural generation with feature extraction\n * Phase 2: Collect gameplay data (player actions, success/failure, time)\n * Phase 3: Train ML models on collected data\n * Phase 4: Deploy ML models alongside procedural generation\n * Phase 5: A/B test and gradually replace procedural with ML\n *\n * SUPPORTED ML APPROACHES:\n * ========================\n * 1. Supervised Learning:\n *    - Input: difficulty, style, player skill level\n *    - Output: segment features (density, complexity, obstacle types)\n *    - Model: Neural network regression\n *\n * 2. Reinforcement Learning:\n *    - Agent learns to generate segments that match target difficulty\n *    - Reward: based on player completion rate, engagement time\n *    - Model: PPO or DQN\n *\n * 3. Generative Models:\n *    - VAE/GAN for generating novel segment patterns\n *    - Input: latent vector + difficulty\n *    - Output: segment structure\n *\n * 4. Sequence Models:\n *    - LSTM/Transformer to generate coherent sequences of segments\n *    - Learns temporal patterns and difficulty curves\n */\n\nimport {\n  Level,\n  LevelSegment,\n  LevelGeneratorConfig,\n  GameObject,\n} from '../types';\nimport {\n  ProceduralGenerator,\n  SeededRandom,\n  applyConstraints,\n  analyzeSegmentDifficulty,\n} from './ProceduralGenerator';\nimport { getAllTemplates, extractFeatureVector } from './SegmentTemplates';\n\n/**\n * ML Model output interface\n * This defines what we expect from ML models\n */\nexport interface MLModelOutput {\n  // Predicted segment features (normalized 0-1)\n  features: {\n    difficulty: number;\n    density: number;           // Obstacles per unit length\n    verticalComplexity: number; // Height variation\n    gapFrequency: number;      // Number of gaps\n    platformRatio: number;     // Platform coverage\n    obstacleTypes: number[];   // Distribution of obstacle types [spike, block, gap]\n  };\n\n  // Optional: Direct obstacle predictions\n  obstacles?: Array<{\n    type: 'spike' | 'block' | 'platform';\n    x: number;                 // Relative position in segment\n    y: number;                 // Height\n    confidence: number;        // Model confidence (0-1)\n  }>;\n\n  // Model metadata\n  modelVersion?: string;\n  confidence?: number;\n  latencyMs?: number;\n}\n\n/**\n * Training data structure for ML models\n */\nexport interface TrainingExample {\n  // Input features\n  input: {\n    targetDifficulty: number;\n    segmentIndex: number;      // Position in level\n    previousSegmentFeatures?: number[];\n    playerSkillLevel?: number;\n    style?: string;\n  };\n\n  // Output/Label\n  output: {\n    segmentFeatures: number[];\n    objects: Array<{\n      type: string;\n      x: number;\n      y: number;\n      width: number;\n      height: number;\n    }>;\n  };\n\n  // Gameplay metrics (for reinforcement learning)\n  metrics?: {\n    playerCompleted: boolean;\n    attempts: number;\n    completionTime: number;\n    deathPositions: number[];\n  };\n}\n\n/**\n * Main LevelGenerator class with ML-ready architecture\n */\nexport class LevelGenerator {\n  private proceduralGenerator: ProceduralGenerator;\n  private mlModel: MLModelInterface | null;\n  private trainingData: TrainingExample[];\n\n  constructor() {\n    this.proceduralGenerator = new ProceduralGenerator();\n    this.mlModel = null;\n    this.trainingData = [];\n  }\n\n  // ============================================================================\n  // PUBLIC API - Level Generation\n  // ============================================================================\n\n  /**\n   * Generate a complete level using current best method\n   * Automatically chooses between procedural and ML if available\n   */\n  generate(config: LevelGeneratorConfig): Level {\n    const generationMethod = this.selectGenerationMethod(config);\n\n    let segments: LevelSegment[];\n\n    if (generationMethod === 'ml' && this.mlModel) {\n      segments = this.generateWithML(config);\n    } else {\n      segments = this.generateProcedural(config);\n    }\n\n    // Apply constraints if specified\n    if (config.constraints) {\n      segments = applyConstraints(segments, config.constraints);\n    }\n\n    // Post-process segments\n    segments = this.postProcessSegments(segments, config);\n\n    // Create level object\n    const level: Level = {\n      id: this.generateLevelId(config),\n      name: this.generateLevelName(config),\n      segments,\n      totalLength: segments.reduce((sum, seg) => sum + seg.length, 0),\n      difficulty: config.difficulty,\n      generatedBy: generationMethod,\n      mlModelVersion: this.mlModel?.getVersion(),\n    };\n\n    // Record for training if enabled\n    if (this.isTrainingEnabled()) {\n      this.recordGenerationForTraining(config, level);\n    }\n\n    return level;\n  }\n\n  /**\n   * Generate level using procedural algorithms\n   * This is the baseline/fallback method\n   */\n  generateProcedural(config: LevelGeneratorConfig): LevelSegment[] {\n    // Choose strategy based on style\n    const strategy = this.selectProceduralStrategy(config.style);\n\n    return this.proceduralGenerator.generate(config, strategy);\n  }\n\n  /**\n   * Generate level using ML model\n   *\n   * HOW TO INTEGRATE YOUR ML MODEL:\n   * ================================\n   * 1. Implement the MLModelInterface (see below)\n   * 2. Load your trained model in the implementation\n   * 3. Register it: levelGenerator.setMLModel(yourModel)\n   * 4. The generator will automatically use it when available\n   *\n   * EXAMPLE ML MODEL INTEGRATION:\n   * ```typescript\n   * class MyMLModel implements MLModelInterface {\n   *   async predict(config: LevelGeneratorConfig): Promise<MLModelOutput> {\n   *     // 1. Prepare input features\n   *     const input = [\n   *       config.difficulty,\n   *       config.style === 'classic' ? 1 : 0,\n   *       config.style === 'modern' ? 1 : 0,\n   *       config.style === 'extreme' ? 1 : 0,\n   *     ];\n   *\n   *     // 2. Call your ML model (TensorFlow.js, ONNX, API, etc.)\n   *     const output = await this.model.predict(input);\n   *\n   *     // 3. Return structured output\n   *     return {\n   *       features: {\n   *         difficulty: output[0],\n   *         density: output[1],\n   *         verticalComplexity: output[2],\n   *         gapFrequency: output[3],\n   *         platformRatio: output[4],\n   *         obstacleTypes: [output[5], output[6], output[7]],\n   *       },\n   *     };\n   *   }\n   * }\n   *\n   * const model = new MyMLModel();\n   * await model.load('/models/level-generator-v1.onnx');\n   * levelGenerator.setMLModel(model);\n   * ```\n   */\n  generateWithML(config: LevelGeneratorConfig): LevelSegment[] {\n    if (!this.mlModel) {\n      console.warn('ML model not available, falling back to procedural');\n      return this.generateProcedural(config);\n    }\n\n    const segments: LevelSegment[] = [];\n    const segmentLength = 150;\n    const numSegments = Math.ceil(config.length / segmentLength);\n    const seed = config.seed ?? Math.floor(Math.random() * 1000000);\n\n    for (let i = 0; i < numSegments; i++) {\n      const startX = i * segmentLength;\n\n      // Call ML model for this segment\n      const modelOutput = this.mlModel.predictSync({\n        difficulty: config.difficulty,\n        segmentIndex: i,\n        totalSegments: numSegments,\n        previousSegmentFeatures:\n          i > 0 ? this.extractSegmentFeatures(segments[i - 1]) : undefined,\n        style: config.style,\n      });\n\n      // Convert ML output to actual segment\n      const segment = this.convertMLOutputToSegment(\n        modelOutput,\n        startX,\n        segmentLength,\n        seed + i\n      );\n\n      segments.push(segment);\n    }\n\n    return segments;\n  }\n\n  /**\n   * Hybrid generation: Use ML for some segments, procedural for others\n   * Useful for A/B testing and gradual ML rollout\n   */\n  generateHybrid(\n    config: LevelGeneratorConfig,\n    mlRatio: number = 0.5\n  ): LevelSegment[] {\n    if (!this.mlModel) {\n      return this.generateProcedural(config);\n    }\n\n    const seed = config.seed ?? Math.floor(Math.random() * 1000000);\n    const rng = new SeededRandom(seed);\n\n    const segmentLength = 150;\n    const numSegments = Math.ceil(config.length / segmentLength);\n    const segments: LevelSegment[] = [];\n\n    for (let i = 0; i < numSegments; i++) {\n      const startX = i * segmentLength;\n\n      // Randomly choose between ML and procedural\n      const useML = rng.next() < mlRatio;\n\n      if (useML) {\n        const modelOutput = this.mlModel.predictSync({\n          difficulty: config.difficulty,\n          segmentIndex: i,\n          totalSegments: numSegments,\n          style: config.style,\n        });\n\n        const segment = this.convertMLOutputToSegment(\n          modelOutput,\n          startX,\n          segmentLength,\n          seed + i\n        );\n        segments.push(segment);\n      } else {\n        const proceduralSegments = this.proceduralGenerator.generate(\n          {\n            ...config,\n            length: segmentLength,\n            seed: seed + i,\n          },\n          'template_based'\n        );\n        segments.push(...proceduralSegments);\n      }\n    }\n\n    return segments;\n  }\n\n  // ============================================================================\n  // ML MODEL MANAGEMENT\n  // ============================================================================\n\n  /**\n   * Register an ML model for level generation\n   */\n  setMLModel(model: MLModelInterface): void {\n    this.mlModel = model;\n    console.log(`ML model registered: ${model.getVersion()}`);\n  }\n\n  /**\n   * Remove ML model (fall back to procedural)\n   */\n  removeMLModel(): void {\n    this.mlModel = null;\n  }\n\n  /**\n   * Check if ML model is available\n   */\n  hasMLModel(): boolean {\n    return this.mlModel !== null;\n  }\n\n  // ============================================================================\n  // TRAINING DATA COLLECTION\n  // ============================================================================\n\n  /**\n   * Enable training data collection\n   * Call this to start recording generated levels for ML training\n   */\n  enableTraining(): void {\n    this.trainingData = [];\n  }\n\n  /**\n   * Get collected training data\n   */\n  getTrainingData(): TrainingExample[] {\n    return this.trainingData;\n  }\n\n  /**\n   * Export training data to JSON for ML training pipeline\n   */\n  exportTrainingData(): string {\n    return JSON.stringify(this.trainingData, null, 2);\n  }\n\n  /**\n   * Record gameplay metrics for a level (for reinforcement learning)\n   */\n  recordGameplayMetrics(\n    levelId: string,\n    metrics: {\n      completed: boolean;\n      attempts: number;\n      completionTime: number;\n      deathPositions: number[];\n    }\n  ): void {\n    // Find corresponding training example and update metrics\n    const example = this.trainingData.find(\n      ex => (ex as any).levelId === levelId\n    );\n\n    if (example) {\n      example.metrics = {\n        playerCompleted: metrics.completed,\n        attempts: metrics.attempts,\n        completionTime: metrics.completionTime,\n        deathPositions: metrics.deathPositions,\n      };\n    }\n  }\n\n  // ============================================================================\n  // PRIVATE HELPER METHODS\n  // ============================================================================\n\n  private selectGenerationMethod(\n    config: LevelGeneratorConfig\n  ): 'procedural' | 'ml' {\n    // Use ML if available and not explicitly disabled\n    if (this.mlModel && !(config as any).forceProceduralMode) {\n      return 'ml';\n    }\n    return 'procedural';\n  }\n\n  private selectProceduralStrategy(\n    style?: 'classic' | 'modern' | 'extreme'\n  ): string {\n    switch (style) {\n      case 'classic':\n        return 'template_based';\n      case 'modern':\n        return 'noise_based';\n      case 'extreme':\n        return 'wave_based';\n      default:\n        return 'template_based';\n    }\n  }\n\n  private postProcessSegments(\n    segments: LevelSegment[],\n    config: LevelGeneratorConfig\n  ): LevelSegment[] {\n    // Validate and adjust difficulty\n    return segments.map(segment => ({\n      ...segment,\n      difficulty: this.validateDifficulty(\n        segment.difficulty,\n        config.difficulty\n      ),\n    }));\n  }\n\n  private validateDifficulty(\n    segmentDifficulty: number,\n    targetDifficulty: number\n  ): number {\n    // Ensure segment difficulty is within reasonable range of target\n    const maxDeviation = 0.3;\n    const minDiff = Math.max(0, targetDifficulty - maxDeviation);\n    const maxDiff = Math.min(1, targetDifficulty + maxDeviation);\n\n    return Math.max(minDiff, Math.min(maxDiff, segmentDifficulty));\n  }\n\n  private convertMLOutputToSegment(\n    mlOutput: MLModelOutput,\n    startX: number,\n    length: number,\n    seed: number\n  ): LevelSegment {\n    const objects: GameObject[] = [];\n    const groundY = 500;\n\n    // If model provides direct obstacle predictions, use them\n    if (mlOutput.obstacles && mlOutput.obstacles.length > 0) {\n      mlOutput.obstacles.forEach((obstacle, idx) => {\n        objects.push({\n          id: `ml_${obstacle.type}_${seed}_${idx}`,\n          position: {\n            x: startX + obstacle.x * length,\n            y: groundY + obstacle.y,\n          },\n          velocity: { x: 0, y: 0 },\n          size: {\n            x: obstacle.type === 'spike' ? 15 : 25,\n            y: obstacle.type === 'spike' ? 20 : 25,\n          },\n          type: `obstacle_${obstacle.type}` as any,\n          active: true,\n        });\n      });\n    } else {\n      // Otherwise, use features to procedurally generate with ML guidance\n      objects.push(...this.generateFromFeatures(mlOutput.features, startX, length, seed));\n    }\n\n    return {\n      id: `segment_ml_${seed}_${startX}`,\n      startX,\n      length,\n      difficulty: mlOutput.features.difficulty,\n      objects,\n      metadata: {\n        generationMethod: 'ml',\n        modelVersion: mlOutput.modelVersion,\n        confidence: mlOutput.confidence,\n        features: mlOutput.features,\n      },\n    };\n  }\n\n  private generateFromFeatures(\n    features: MLModelOutput['features'],\n    startX: number,\n    length: number,\n    seed: number\n  ): GameObject[] {\n    const objects: GameObject[] = [];\n    const groundY = 500;\n    const rng = new SeededRandom(seed);\n\n    // Create base platform\n    objects.push({\n      id: `platform_ml_${seed}`,\n      position: { x: startX, y: groundY },\n      velocity: { x: 0, y: 0 },\n      size: { x: length, y: 20 },\n      type: 'platform' as any,\n      active: true,\n    });\n\n    // Generate obstacles based on ML-predicted features\n    const numObstacles = Math.floor(features.density * length);\n\n    for (let i = 0; i < numObstacles; i++) {\n      const xPos = startX + (i / numObstacles) * length + rng.range(-10, 10);\n\n      // Choose obstacle type based on predicted distribution\n      const typeRand = rng.next();\n      const [spikeProb, blockProb] = features.obstacleTypes;\n\n      if (typeRand < spikeProb) {\n        objects.push({\n          id: `spike_ml_${seed}_${i}`,\n          position: { x: xPos, y: groundY - 20 },\n          velocity: { x: 0, y: 0 },\n          size: { x: 15, y: 20 },\n          type: 'obstacle_spike' as any,\n          active: true,\n        });\n      } else if (typeRand < spikeProb + blockProb) {\n        const height = 20 + features.verticalComplexity * 40;\n        objects.push({\n          id: `block_ml_${seed}_${i}`,\n          position: { x: xPos, y: groundY - height },\n          velocity: { x: 0, y: 0 },\n          size: { x: 25, y: height },\n          type: 'obstacle_block' as any,\n          active: true,\n        });\n      }\n    }\n\n    return objects;\n  }\n\n  private extractSegmentFeatures(segment: LevelSegment): number[] {\n    if (segment.metadata?.features) {\n      const f = segment.metadata.features;\n      return [\n        f.difficulty || 0,\n        f.density || 0,\n        f.verticalComplexity || 0,\n        f.gapFrequency || 0,\n        f.platformRatio || 0,\n        ...(f.obstacleTypes || [0, 0, 0]),\n      ];\n    }\n\n    // Fallback: analyze segment if features not available\n    return [analyzeSegmentDifficulty(segment), 0, 0, 0, 0, 0, 0, 0];\n  }\n\n  private generateLevelId(config: LevelGeneratorConfig): string {\n    const timestamp = Date.now();\n    const seed = config.seed ?? 0;\n    return `level_${timestamp}_${seed}`;\n  }\n\n  private generateLevelName(config: LevelGeneratorConfig): string {\n    const difficultyName = this.getDifficultyName(config.difficulty);\n    const styleName = config.style || 'classic';\n    return `${styleName.charAt(0).toUpperCase() + styleName.slice(1)} ${difficultyName}`;\n  }\n\n  private getDifficultyName(difficulty: number): string {\n    if (difficulty < 0.2) return 'Easy';\n    if (difficulty < 0.4) return 'Normal';\n    if (difficulty < 0.6) return 'Hard';\n    if (difficulty < 0.8) return 'Expert';\n    return 'Extreme';\n  }\n\n  private isTrainingEnabled(): boolean {\n    return this.trainingData !== null;\n  }\n\n  private recordGenerationForTraining(\n    config: LevelGeneratorConfig,\n    level: Level\n  ): void {\n    level.segments.forEach((segment, idx) => {\n      const example: TrainingExample = {\n        input: {\n          targetDifficulty: config.difficulty,\n          segmentIndex: idx,\n          previousSegmentFeatures:\n            idx > 0\n              ? this.extractSegmentFeatures(level.segments[idx - 1])\n              : undefined,\n          style: config.style,\n        },\n        output: {\n          segmentFeatures: this.extractSegmentFeatures(segment),\n          objects: segment.objects.map(obj => ({\n            type: obj.type,\n            x: obj.position.x,\n            y: obj.position.y,\n            width: obj.size.x,\n            height: obj.size.y,\n          })),\n        },\n      };\n\n      this.trainingData.push(example);\n    });\n  }\n}\n\n// ============================================================================\n// ML MODEL INTERFACE\n// ============================================================================\n\n/**\n * Interface that ML models must implement\n * This provides a contract for different ML implementations\n */\nexport interface MLModelInterface {\n  /**\n   * Synchronous prediction (for real-time generation)\n   */\n  predictSync(input: {\n    difficulty: number;\n    segmentIndex: number;\n    totalSegments: number;\n    previousSegmentFeatures?: number[];\n    style?: string;\n  }): MLModelOutput;\n\n  /**\n   * Asynchronous prediction (for batch generation)\n   */\n  predict(input: {\n    difficulty: number;\n    segmentIndex: number;\n    totalSegments: number;\n    previousSegmentFeatures?: number[];\n    style?: string;\n  }): Promise<MLModelOutput>;\n\n  /**\n   * Load model from file/URL\n   */\n  load(modelPath: string): Promise<void>;\n\n  /**\n   * Get model version\n   */\n  getVersion(): string;\n\n  /**\n   * Get model metadata\n   */\n  getMetadata(): {\n    architecture: string;\n    trainedOn: string;\n    accuracy?: number;\n    avgLatency?: number;\n  };\n}\n\n/**\n * Example stub ML model for testing\n * Replace this with your actual ML implementation\n */\nexport class StubMLModel implements MLModelInterface {\n  private version = 'stub-v1.0.0';\n  private rng: SeededRandom;\n\n  constructor() {\n    this.rng = new SeededRandom(12345);\n  }\n\n  predictSync(input: any): MLModelOutput {\n    // Stub: just return features based on input difficulty\n    return {\n      features: {\n        difficulty: input.difficulty,\n        density: input.difficulty * 0.8,\n        verticalComplexity: input.difficulty * 0.6,\n        gapFrequency: Math.floor(input.difficulty * 3),\n        platformRatio: 1 - input.difficulty * 0.3,\n        obstacleTypes: [\n          input.difficulty * 0.6,\n          input.difficulty * 0.4,\n          input.difficulty * 0.2,\n        ],\n      },\n      modelVersion: this.version,\n      confidence: 0.75,\n      latencyMs: 5,\n    };\n  }\n\n  async predict(input: any): Promise<MLModelOutput> {\n    return this.predictSync(input);\n  }\n\n  async load(modelPath: string): Promise<void> {\n    console.log(`Stub model loaded from ${modelPath}`);\n  }\n\n  getVersion(): string {\n    return this.version;\n  }\n\n  getMetadata() {\n    return {\n      architecture: 'stub',\n      trainedOn: 'synthetic',\n      accuracy: 0.75,\n      avgLatency: 5,\n    };\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2959, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/levels/TestLevel.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/levels/TestLevel.ts"],"sourcesContent":["// Simple test level for Geometry Dash clone\nimport { Level, LevelSegment, GameObject, GameObjectType, Platform, Obstacle } from '../types';\n\nexport function createTestLevel(): Level {\n  const platforms: Platform[] = [];\n  const obstacles: Obstacle[] = [];\n\n  // GROUND LEVEL: y = 500 (player can stand here)\n  // PLAYER: 30px tall, stands at y = 470 when on ground\n  // MAX JUMP HEIGHT: ~100px, can reach y = 370\n\n  // Single solid floor - no gaps, no seams, impossible to fall through\n  platforms.push({\n    id: 'solid-floor',\n    position: { x: 0, y: 500 },\n    velocity: { x: 0, y: 0 },\n    size: { x: 6000, y: 50 },\n    type: GameObjectType.PLATFORM,\n    active: true,\n    width: 6000,\n  });\n\n  // DIFFICULTY PROGRESSION: Easy  Medium  Hard\n\n  // SECTION 1: Easy (x: 0-1500) - Single obstacles, well spaced\n  const easySpikes = [500, 800];\n  easySpikes.forEach((x, i) => {\n    obstacles.push({\n      id: `easy-spike-${i}`,\n      position: { x, y: 470 },\n      velocity: { x: 0, y: 0 },\n      size: { x: 30, y: 30 },\n      type: GameObjectType.OBSTACLE_SPIKE,\n      active: true,\n      damage: 1,\n    });\n  });\n\n  // SECTION 2: Medium (x: 1500-3500) - Closer spacing, some blocks\n  const mediumSpikes = [1700, 1950, 2300];\n  mediumSpikes.forEach((x, i) => {\n    obstacles.push({\n      id: `medium-spike-${i}`,\n      position: { x, y: 470 },\n      velocity: { x: 0, y: 0 },\n      size: { x: 30, y: 30 },\n      type: GameObjectType.OBSTACLE_SPIKE,\n      active: true,\n      damage: 1,\n    });\n  });\n\n  const mediumBlocks = [\n    { x: 2100, y: 450 },\n    { x: 2800, y: 445 },\n  ];\n  mediumBlocks.forEach((pos, i) => {\n    obstacles.push({\n      id: `medium-block-${i}`,\n      position: pos,\n      velocity: { x: 0, y: 0 },\n      size: { x: 50, y: 50 },\n      type: GameObjectType.OBSTACLE_BLOCK,\n      active: true,\n      damage: 1,\n    });\n  });\n\n  // SECTION 3: Hard (x: 3300+) - More spread out after ~11 second mark\n  const hardSpikes = [3600, 4200, 4800, 5400, 6000];\n  hardSpikes.forEach((x, i) => {\n    obstacles.push({\n      id: `hard-spike-${i}`,\n      position: { x, y: 470 },\n      velocity: { x: 0, y: 0 },\n      size: { x: 30, y: 30 },\n      type: GameObjectType.OBSTACLE_SPIKE,\n      active: true,\n      damage: 1,\n    });\n  });\n\n  const hardBlocks = [\n    { x: 3900, y: 445 },\n    { x: 4500, y: 440 },\n    { x: 5100, y: 445 },\n    { x: 5700, y: 450 },\n  ];\n  hardBlocks.forEach((pos, i) => {\n    obstacles.push({\n      id: `hard-block-${i}`,\n      position: pos,\n      velocity: { x: 0, y: 0 },\n      size: { x: 50, y: 50 },\n      type: GameObjectType.OBSTACLE_BLOCK,\n      active: true,\n      damage: 1,\n    });\n  });\n\n  // Add some elevated platforms for variety (all reachable with jumps)\n  const elevatedPlatforms = [\n    { x: 650, y: 410 },\n    { x: 1900, y: 400 },\n    { x: 3200, y: 415 },\n    { x: 4600, y: 405 },\n  ];\n  elevatedPlatforms.forEach((pos, i) => {\n    platforms.push({\n      id: `elevated-${i}`,\n      position: pos,\n      velocity: { x: 0, y: 0 },\n      size: { x: 140, y: 25 },\n      type: GameObjectType.PLATFORM,\n      active: true,\n      width: 140,\n    });\n  });\n\n  const allObjects = [...platforms, ...obstacles];\n\n  const segment: LevelSegment = {\n    id: 'segment-1',\n    startX: 0,\n    length: 6000,\n    difficulty: 0.5,\n    objects: allObjects,\n  };\n\n  return {\n    id: 'test-level-1',\n    name: 'Test Level',\n    segments: [segment],\n    totalLength: 6000,\n    difficulty: 0.5,\n    generatedBy: 'manual',\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3197, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/levels/index.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/levels/index.ts"],"sourcesContent":["/**\n * Level Generation System - Main Exports\n *\n * This module provides a complete, ML-ready level generation system for\n * a Geometry Dash clone.\n *\n * QUICK START:\n * ============\n * ```typescript\n * import { LevelGenerator } from '@/game/levels';\n *\n * const generator = new LevelGenerator();\n *\n * const level = generator.generate({\n *   difficulty: 0.5,\n *   length: 1000,\n *   seed: 12345,\n *   style: 'classic',\n * });\n * ```\n *\n * ARCHITECTURE:\n * =============\n * - LevelGenerator: Main interface, handles both procedural and ML generation\n * - ProceduralGenerator: Algorithm-based generation (baseline)\n * - SegmentTemplates: Reusable building blocks with ML-ready features\n *\n * ML INTEGRATION:\n * ===============\n * 1. Implement MLModelInterface\n * 2. Train your model on collected gameplay data\n * 3. Register: generator.setMLModel(yourModel)\n * 4. Generate: generator.generate(config) - automatically uses ML\n */\n\n// ============================================================================\n// MAIN GENERATOR\n// ============================================================================\n\nexport { LevelGenerator, StubMLModel } from './LevelGenerator';\nexport type { MLModelInterface, MLModelOutput, TrainingExample } from './LevelGenerator';\n\n// ============================================================================\n// TEST LEVEL\n// ============================================================================\n\nexport { createTestLevel } from './TestLevel';\nexport { createInfiniteLevel, generateInfiniteChunk } from './InfiniteLevel';\n\n// ============================================================================\n// PROCEDURAL GENERATION\n// ============================================================================\n\nexport {\n  ProceduralGenerator,\n  SeededRandom,\n  TemplateBasedStrategy,\n  NoiseBasedStrategy,\n  WaveBasedStrategy,\n  applyConstraints,\n  analyzeSegmentDifficulty,\n} from './ProceduralGenerator';\nexport type { GenerationStrategy } from './ProceduralGenerator';\n\n// ============================================================================\n// SEGMENT TEMPLATES\n// ============================================================================\n\nexport {\n  FLAT_GROUND_SPIKE,\n  SIMPLE_GAP,\n  STAIRCASE_BLOCKS,\n  SPIKE_RHYTHM,\n  PLATFORM_JUMPS,\n  MIXED_OBSTACLES,\n  EXTREME_CHALLENGE,\n  TEMPLATE_REGISTRY,\n  getAllTemplates,\n  getTemplatesByDifficulty,\n  extractFeatureVector,\n  generateTrainingData,\n} from './SegmentTemplates';\nexport type { SegmentTemplate, SegmentFeatures } from './SegmentTemplates';\n\n// ============================================================================\n// CONVENIENCE FUNCTIONS\n// ============================================================================\n\nimport { LevelGenerator } from './LevelGenerator';\nimport { LevelGeneratorConfig, Level } from '../types';\n\n/**\n * Create a default level generator instance\n */\nexport function createLevelGenerator(): LevelGenerator {\n  return new LevelGenerator();\n}\n\n/**\n * Quick generate function for simple use cases\n */\nexport function generateLevel(\n  difficulty: number,\n  length: number,\n  seed?: number\n): Level {\n  const generator = new LevelGenerator();\n  return generator.generate({\n    difficulty,\n    length,\n    seed,\n    style: 'classic',\n  });\n}\n\n/**\n * Generate a level with ML if model is provided\n */\nexport function generateLevelWithML(\n  config: LevelGeneratorConfig,\n  model?: any\n): Level {\n  const generator = new LevelGenerator();\n\n  if (model) {\n    generator.setMLModel(model);\n  }\n\n  return generator.generate(config);\n}\n\n/**\n * Batch generate multiple levels (useful for testing/training data)\n */\nexport function generateLevelBatch(\n  baseConfig: LevelGeneratorConfig,\n  count: number\n): Level[] {\n  const generator = new LevelGenerator();\n  const levels: Level[] = [];\n\n  for (let i = 0; i < count; i++) {\n    const config = {\n      ...baseConfig,\n      seed: (baseConfig.seed ?? 0) + i,\n    };\n\n    levels.push(generator.generate(config));\n  }\n\n  return levels;\n}\n\n/**\n * Generate levels across difficulty spectrum (for playtesting)\n */\nexport function generateDifficultySpectrum(\n  length: number = 1000,\n  steps: number = 5\n): Level[] {\n  const generator = new LevelGenerator();\n  const levels: Level[] = [];\n\n  for (let i = 0; i < steps; i++) {\n    const difficulty = i / (steps - 1); // 0.0 to 1.0\n\n    levels.push(\n      generator.generate({\n        difficulty,\n        length,\n        seed: i,\n        style: 'classic',\n      })\n    );\n  }\n\n  return levels;\n}\n\n// ============================================================================\n// DEFAULT INSTANCE\n// ============================================================================\n\n/**\n * Singleton instance for convenience\n * Use this if you don't need multiple generators\n */\nexport const defaultLevelGenerator = new LevelGenerator();\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3460, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/components/GameCanvas.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/components/GameCanvas.tsx"],"sourcesContent":["'use client';\n\nimport React, { useRef, useEffect, useCallback } from 'react';\nimport { Renderer } from '../systems/Renderer';\nimport { GameState } from '../types';\n\ninterface GameCanvasProps {\n  gameState: GameState;\n  width?: number;\n  height?: number;\n  className?: string;\n}\n\nexport const GameCanvas: React.FC<GameCanvasProps> = ({\n  gameState,\n  width = 1200,\n  height = 600,\n  className = '',\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const rendererRef = useRef<Renderer | null>(null);\n  const animationFrameRef = useRef<number | null>(null);\n\n  // Initialize renderer\n  useEffect(() => {\n    if (!canvasRef.current) return;\n\n    try {\n      rendererRef.current = new Renderer({\n        canvas: canvasRef.current,\n        width,\n        height,\n      });\n\n      console.log('Renderer initialized successfully');\n    } catch (error) {\n      console.error('Failed to initialize renderer:', error);\n    }\n\n    return () => {\n      if (rendererRef.current) {\n        rendererRef.current.destroy();\n        rendererRef.current = null;\n      }\n    };\n  }, [width, height]);\n\n  // Handle window resize\n  useEffect(() => {\n    const handleResize = () => {\n      if (rendererRef.current) {\n        const container = canvasRef.current?.parentElement;\n        if (container) {\n          const newWidth = container.clientWidth;\n          const newHeight = container.clientHeight || height;\n          rendererRef.current.resize(newWidth, newHeight);\n        }\n      }\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [height]);\n\n  // Render loop\n  const render = useCallback(() => {\n    if (rendererRef.current && gameState) {\n      rendererRef.current.render(gameState);\n    }\n\n    // Continue animation loop\n    animationFrameRef.current = requestAnimationFrame(render);\n  }, [gameState]);\n\n  // Start/stop render loop\n  useEffect(() => {\n    if (!gameState.isPaused) {\n      animationFrameRef.current = requestAnimationFrame(render);\n    }\n\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, [render, gameState.isPaused]);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      className={`game-canvas ${className}`}\n      style={{\n        display: 'block',\n        maxWidth: '100%',\n        imageRendering: 'crisp-edges',\n      }}\n    />\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3595, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/components/Player.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/components/Player.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { Player as PlayerType } from '../types';\n\ninterface PlayerProps {\n  player: PlayerType;\n  cameraOffset: number;\n}\n\n/**\n * Player component - Provides React-based utilities for player rendering\n * Note: Actual rendering is done via Canvas in Renderer.ts\n * This component can be used for debugging or CSS-based overlays\n */\nexport const Player: React.FC<PlayerProps> = ({ player, cameraOffset }) => {\n  // This component is primarily for logical purposes\n  // The actual rendering happens in Renderer.ts using Canvas API\n\n  // Can be used for debugging\n  if (process.env.NODE_ENV === 'development') {\n    return (\n      <div\n        className=\"player-debug\"\n        style={{\n          position: 'absolute',\n          left: player.position.x - cameraOffset,\n          top: player.position.y,\n          width: player.size.x,\n          height: player.size.y,\n          border: '2px dashed rgba(0, 255, 0, 0.3)',\n          pointerEvents: 'none',\n          display: 'none', // Hidden by default\n        }}\n        title={`Player - Health: ${player.health}, Score: ${player.score}`}\n      />\n    );\n  }\n\n  return null;\n};\n\n/**\n * Player rendering utilities for use in Renderer\n */\nexport const PlayerRenderer = {\n  /**\n   * Calculate player rotation based on velocity\n   */\n  getRotation: (player: PlayerType): number => {\n    return player.velocity.y * 0.05;\n  },\n\n  /**\n   * Get player color based on health\n   */\n  getColor: (player: PlayerType): string => {\n    if (player.health <= 25) return '#ff0066'; // Low health - red\n    if (player.health <= 50) return '#ffaa00'; // Medium health - orange\n    return '#00f2ff'; // Full health - cyan\n  },\n\n  /**\n   * Calculate animation frame based on movement\n   */\n  getAnimationFrame: (player: PlayerType, time: number): number => {\n    const speed = Math.abs(player.velocity.x);\n    const frameRate = Math.max(50, 200 - speed * 10);\n    return Math.floor(time / frameRate) % 4;\n  },\n\n  /**\n   * Check if player should show trail effect\n   */\n  shouldShowTrail: (player: PlayerType): boolean => {\n    return Math.abs(player.velocity.x) > 3 || Math.abs(player.velocity.y) > 5;\n  },\n\n  /**\n   * Get trail particles for player movement\n   */\n  getTrailParticles: (\n    player: PlayerType,\n    count: number = 3\n  ): Array<{ x: number; y: number; alpha: number }> => {\n    const particles: Array<{ x: number; y: number; alpha: number }> = [];\n\n    for (let i = 0; i < count; i++) {\n      particles.push({\n        x: player.position.x - (i + 1) * 10,\n        y: player.position.y + player.size.y / 2,\n        alpha: 0.3 - i * 0.1,\n      });\n    }\n\n    return particles;\n  },\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3684, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/components/Obstacle.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/components/Obstacle.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { Obstacle as ObstacleType, GameObjectType } from '../types';\n\ninterface ObstacleProps {\n  obstacle: ObstacleType;\n  cameraOffset: number;\n}\n\n/**\n * Obstacle component - Provides React-based utilities for obstacle rendering\n * Note: Actual rendering is done via Canvas in Renderer.ts\n * This component can be used for debugging or CSS-based overlays\n */\nexport const Obstacle: React.FC<ObstacleProps> = ({ obstacle, cameraOffset }) => {\n  // This component is primarily for logical purposes\n  // The actual rendering happens in Renderer.ts using Canvas API\n\n  // Can be used for debugging\n  if (process.env.NODE_ENV === 'development') {\n    return (\n      <div\n        className=\"obstacle-debug\"\n        style={{\n          position: 'absolute',\n          left: obstacle.position.x - cameraOffset,\n          top: obstacle.position.y,\n          width: obstacle.size.x,\n          height: obstacle.size.y,\n          border: '2px dashed rgba(255, 0, 0, 0.3)',\n          pointerEvents: 'none',\n          display: 'none', // Hidden by default\n        }}\n        title={`Obstacle - Type: ${obstacle.type}, Damage: ${obstacle.damage}`}\n      />\n    );\n  }\n\n  return null;\n};\n\n/**\n * Obstacle rendering utilities for use in Renderer\n */\nexport const ObstacleRenderer = {\n  /**\n   * Get spike vertices for drawing triangular spikes\n   */\n  getSpikeVertices: (\n    x: number,\n    y: number,\n    width: number,\n    height: number\n  ): Array<{ x: number; y: number }> => {\n    return [\n      { x: x + width / 2, y }, // Top point\n      { x: x + width, y: y + height }, // Bottom right\n      { x, y: y + height }, // Bottom left\n    ];\n  },\n\n  /**\n   * Get block pattern for drawing decorative patterns\n   */\n  getBlockPattern: (\n    x: number,\n    y: number,\n    width: number,\n    height: number\n  ): Array<{ from: { x: number; y: number }; to: { x: number; y: number } }> => {\n    return [\n      {\n        from: { x, y },\n        to: { x: x + width, y: y + height },\n      },\n      {\n        from: { x: x + width, y },\n        to: { x, y: y + height },\n      },\n    ];\n  },\n\n  /**\n   * Get obstacle color based on type and danger level\n   */\n  getColor: (obstacle: ObstacleType): { fill: string; glow: string; border: string } => {\n    const baseDamage = obstacle.damage;\n\n    if (baseDamage >= 100) {\n      // Instant kill obstacles\n      return {\n        fill: '#ff0044',\n        glow: '#ff1155',\n        border: '#ff3366',\n      };\n    } else if (baseDamage >= 50) {\n      // High damage obstacles\n      return {\n        fill: '#ff006e',\n        glow: '#ff1a7f',\n        border: '#ff3399',\n      };\n    } else {\n      // Low damage obstacles\n      return {\n        fill: '#ff4488',\n        glow: '#ff66aa',\n        border: '#ff88bb',\n      };\n    }\n  },\n\n  /**\n   * Calculate animation offset for moving obstacles\n   */\n  getAnimationOffset: (obstacle: ObstacleType, time: number): { x: number; y: number } => {\n    // Some obstacles could have animated movement\n    const shouldAnimate = obstacle.velocity.x !== 0 || obstacle.velocity.y !== 0;\n\n    if (!shouldAnimate) {\n      return { x: 0, y: 0 };\n    }\n\n    return {\n      x: Math.sin(time * 0.002) * 5,\n      y: Math.cos(time * 0.002) * 5,\n    };\n  },\n\n  /**\n   * Get rotation for spinning obstacles\n   */\n  getRotation: (obstacle: ObstacleType, time: number): number => {\n    // Spikes don't rotate, blocks can rotate\n    if (obstacle.type === GameObjectType.OBSTACLE_SPIKE) {\n      return 0;\n    }\n\n    return (time * 0.001) % (Math.PI * 2);\n  },\n\n  /**\n   * Get danger particles around high-damage obstacles\n   */\n  getDangerParticles: (\n    obstacle: ObstacleType,\n    time: number\n  ): Array<{ x: number; y: number; size: number; alpha: number }> => {\n    if (obstacle.damage < 75) return [];\n\n    const particles: Array<{ x: number; y: number; size: number; alpha: number }> = [];\n    const centerX = obstacle.position.x + obstacle.size.x / 2;\n    const centerY = obstacle.position.y + obstacle.size.y / 2;\n    const particleCount = 6;\n\n    for (let i = 0; i < particleCount; i++) {\n      const angle = (time * 0.002 + (i * Math.PI * 2) / particleCount) % (Math.PI * 2);\n      const radius = 30 + Math.sin(time * 0.003) * 10;\n\n      particles.push({\n        x: centerX + Math.cos(angle) * radius,\n        y: centerY + Math.sin(angle) * radius,\n        size: 3 + Math.sin(time * 0.004 + i) * 1,\n        alpha: 0.5 + Math.sin(time * 0.003 + i) * 0.3,\n      });\n    }\n\n    return particles;\n  },\n\n  /**\n   * Get warning indicator for upcoming obstacles\n   */\n  shouldShowWarning: (obstacle: ObstacleType, playerX: number): boolean => {\n    const distance = obstacle.position.x - playerX;\n    return distance > 0 && distance < 300 && obstacle.damage >= 50;\n  },\n\n  /**\n   * Get scale multiplier for pulsing effect\n   */\n  getPulseScale: (time: number, speed: number = 0.003): number => {\n    return 1 + Math.sin(time * speed) * 0.1;\n  },\n};\n\n/**\n * Factory functions for creating different obstacle types\n */\nexport const ObstacleFactory = {\n  /**\n   * Create a spike obstacle\n   */\n  createSpike: (x: number, y: number, damage: number = 100): ObstacleType => {\n    return {\n      id: `spike_${Date.now()}_${Math.random()}`,\n      position: { x, y },\n      velocity: { x: 0, y: 0 },\n      size: { x: 40, y: 40 },\n      type: GameObjectType.OBSTACLE_SPIKE,\n      active: true,\n      damage,\n    };\n  },\n\n  /**\n   * Create a block obstacle\n   */\n  createBlock: (x: number, y: number, damage: number = 50): ObstacleType => {\n    return {\n      id: `block_${Date.now()}_${Math.random()}`,\n      position: { x, y },\n      velocity: { x: 0, y: 0 },\n      size: { x: 50, y: 50 },\n      type: GameObjectType.OBSTACLE_BLOCK,\n      active: true,\n      damage,\n    };\n  },\n\n  /**\n   * Create a moving block obstacle\n   */\n  createMovingBlock: (\n    x: number,\n    y: number,\n    velocityX: number = 2,\n    damage: number = 50\n  ): ObstacleType => {\n    return {\n      id: `moving_block_${Date.now()}_${Math.random()}`,\n      position: { x, y },\n      velocity: { x: velocityX, y: 0 },\n      size: { x: 50, y: 50 },\n      type: GameObjectType.OBSTACLE_BLOCK,\n      active: true,\n      damage,\n    };\n  },\n};\n"],"names":[],"mappings":"AAoBM,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK,aAAa;;AApB5C,YAAY,CAAC;;;;;;;;;;AAEb,MAAA,UAAA,kCAA0B;AAC1B,MAAA,8BAAoE;AAOpE;;;;GAIG,CACI,MAAM,QAAQ,GAA4B,CAAC,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAE,EAAE;IAC9E,mDAAmD;IACnD,+DAA+D;IAE/D,4BAA4B;IAC5B,wCAA4C,CAAC;QAC3C,OAAO,AACL,QAAA,OAAA,CAAA,aAAA,CAAA,OAAA;YACE,SAAS,EAAC,gBAAgB;YAC1B,KAAK,EAAE;gBACL,QAAQ,EAAE,UAAU;gBACpB,IAAI,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC,GAAG,YAAY;gBACxC,GAAG,EAAE,QAAQ,CAAC,QAAQ,CAAC,CAAC;gBACxB,KAAK,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;gBACtB,MAAM,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;gBACvB,MAAM,EAAE,iCAAiC;gBACzC,aAAa,EAAE,MAAM;gBACrB,OAAO,EAAE,MAAM,EAAE,oBAAoB;aACtC;YACD,KAAK,EAAE,CAAA,iBAAA,EAAoB,QAAQ,CAAC,IAAI,CAAA,UAAA,EAAa,QAAQ,CAAC,MAAM,EAAE;QAAA,EACtE,CACH,CAAC;IACJ,CAAC;;;AAGH,CAAC,CAAC;AAzBW,QAAA,QAAQ,GAAA,SAyBnB;AAEF;;GAEG,CACU,QAAA,gBAAgB,GAAG;IAC9B;;OAEG,CACH,gBAAgB,EAAE,CAChB,CAAS,EACT,CAAS,EACT,KAAa,EACb,MAAc,EACmB,EAAE;QACnC,OAAO;YACL;gBAAE,CAAC,EAAE,CAAC,GAAG,KAAK,GAAG,CAAC;gBAAE,CAAC;YAAA,CAAE,EAAE,YAAY;YACrC;gBAAE,CAAC,EAAE,CAAC,GAAG,KAAK;gBAAE,CAAC,EAAE,CAAC,GAAG,MAAM;YAAA,CAAE,EAAE,eAAe;YAChD;gBAAE,CAAC;gBAAE,CAAC,EAAE,CAAC,GAAG,MAAM;YAAA,CAAE,EAAE,cAAc;SACrC,CAAC;IACJ,CAAC;IAED;;OAEG,CACH,eAAe,EAAE,CACf,CAAS,EACT,CAAS,EACT,KAAa,EACb,MAAc,EAC2D,EAAE;QAC3E,OAAO;YACL;gBACE,IAAI,EAAE;oBAAE,CAAC;oBAAE,CAAC;gBAAA,CAAE;gBACd,EAAE,EAAE;oBAAE,CAAC,EAAE,CAAC,GAAG,KAAK;oBAAE,CAAC,EAAE,CAAC,GAAG,MAAM;gBAAA,CAAE;aACpC;YACD;gBACE,IAAI,EAAE;oBAAE,CAAC,EAAE,CAAC,GAAG,KAAK;oBAAE,CAAC;gBAAA,CAAE;gBACzB,EAAE,EAAE;oBAAE,CAAC;oBAAE,CAAC,EAAE,CAAC,GAAG,MAAM;gBAAA,CAAE;aACzB;SACF,CAAC;IACJ,CAAC;IAED;;OAEG,CACH,QAAQ,EAAE,CAAC,QAAsB,EAAkD,EAAE;QACnF,MAAM,UAAU,GAAG,QAAQ,CAAC,MAAM,CAAC;QAEnC,IAAI,UAAU,IAAI,GAAG,EAAE,CAAC;YACtB,yBAAyB;YACzB,OAAO;gBACL,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,SAAS;gBACf,MAAM,EAAE,SAAS;aAClB,CAAC;QACJ,CAAC,MAAM,IAAI,UAAU,IAAI,EAAE,EAAE,CAAC;YAC5B,wBAAwB;YACxB,OAAO;gBACL,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,SAAS;gBACf,MAAM,EAAE,SAAS;aAClB,CAAC;QACJ,CAAC,MAAM,CAAC;YACN,uBAAuB;YACvB,OAAO;gBACL,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,SAAS;gBACf,MAAM,EAAE,SAAS;aAClB,CAAC;QACJ,CAAC;IACH,CAAC;IAED;;OAEG,CACH,kBAAkB,EAAE,CAAC,QAAsB,EAAE,IAAY,EAA4B,EAAE;QACrF,8CAA8C;QAC9C,MAAM,aAAa,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC;QAE7E,IAAI,CAAC,aAAa,EAAE,CAAC;YACnB,OAAO;gBAAE,CAAC,EAAE,CAAC;gBAAE,CAAC,EAAE,CAAC;YAAA,CAAE,CAAC;QACxB,CAAC;QAED,OAAO;YACL,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC;YAC7B,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,CAAC;SAC9B,CAAC;IACJ,CAAC;IAED;;OAEG,CACH,WAAW,EAAE,CAAC,QAAsB,EAAE,IAAY,EAAU,EAAE;QAC5D,yCAAyC;QACzC,IAAI,QAAQ,CAAC,IAAI,KAAK,QAAA,cAAc,CAAC,cAAc,EAAE,CAAC;YACpD,OAAO,CAAC,CAAC;QACX,CAAC;QAED,OAAO,AAAC,IAAI,GAAG,KAAK,CAAC,EAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;IACxC,CAAC;IAED;;OAEG,CACH,kBAAkB,EAAE,CAClB,QAAsB,EACtB,IAAY,EACkD,EAAE;QAChE,IAAI,QAAQ,CAAC,MAAM,GAAG,EAAE,EAAE,OAAO,EAAE,CAAC;QAEpC,MAAM,SAAS,GAAiE,EAAE,CAAC;QACnF,MAAM,OAAO,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QAC1D,MAAM,OAAO,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;QAC1D,MAAM,aAAa,GAAG,CAAC,CAAC;QAExB,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,EAAE,CAAC,EAAE,CAAE,CAAC;YACvC,MAAM,KAAK,GAAG,CAAC,IAAI,GAAG,KAAK,GAAG,AAAC,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,EAAG,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;YACjF,MAAM,MAAM,GAAG,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC;YAEhD,SAAS,CAAC,IAAI,CAAC;gBACb,CAAC,EAAE,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,MAAM;gBACrC,CAAC,EAAE,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,MAAM;gBACrC,IAAI,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC;gBACxC,KAAK,EAAE,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,GAAG;aAC9C,CAAC,CAAC;QACL,CAAC;QAED,OAAO,SAAS,CAAC;IACnB,CAAC;IAED;;OAEG,CACH,iBAAiB,EAAE,CAAC,QAAsB,EAAE,OAAe,EAAW,EAAE;QACtE,MAAM,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC,GAAG,OAAO,CAAC;QAC/C,OAAO,QAAQ,GAAG,CAAC,IAAI,QAAQ,GAAG,GAAG,IAAI,QAAQ,CAAC,MAAM,IAAI,EAAE,CAAC;IACjE,CAAC;IAED;;OAEG,CACH,aAAa,EAAE,CAAC,IAAY,EAAE,QAAgB,KAAK,EAAU,EAAE;QAC7D,OAAO,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK,CAAC,GAAG,GAAG,CAAC;IAC1C,CAAC;CACF,CAAC;AAEF;;GAEG,CACU,QAAA,eAAe,GAAG;IAC7B;;OAEG,CACH,WAAW,EAAE,CAAC,CAAS,EAAE,CAAS,EAAE,SAAiB,GAAG,EAAgB,EAAE;QACxE,OAAO;YACL,EAAE,EAAE,CAAA,MAAA,EAAS,IAAI,CAAC,GAAG,EAAE,CAAA,CAAA,EAAI,IAAI,CAAC,MAAM,EAAE,EAAE;YAC1C,QAAQ,EAAE;gBAAE,CAAC;gBAAE,CAAC;YAAA,CAAE;YAClB,QAAQ,EAAE;gBAAE,CAAC,EAAE,CAAC;gBAAE,CAAC,EAAE,CAAC;YAAA,CAAE;YACxB,IAAI,EAAE;gBAAE,CAAC,EAAE,EAAE;gBAAE,CAAC,EAAE,EAAE;YAAA,CAAE;YACtB,IAAI,EAAE,QAAA,cAAc,CAAC,cAAc;YACnC,MAAM,EAAE,IAAI;YACZ,MAAM;SACP,CAAC;IACJ,CAAC;IAED;;OAEG,CACH,WAAW,EAAE,CAAC,CAAS,EAAE,CAAS,EAAE,SAAiB,EAAE,EAAgB,EAAE;QACvE,OAAO;YACL,EAAE,EAAE,CAAA,MAAA,EAAS,IAAI,CAAC,GAAG,EAAE,CAAA,CAAA,EAAI,IAAI,CAAC,MAAM,EAAE,EAAE;YAC1C,QAAQ,EAAE;gBAAE,CAAC;gBAAE,CAAC;YAAA,CAAE;YAClB,QAAQ,EAAE;gBAAE,CAAC,EAAE,CAAC;gBAAE,CAAC,EAAE,CAAC;YAAA,CAAE;YACxB,IAAI,EAAE;gBAAE,CAAC,EAAE,EAAE;gBAAE,CAAC,EAAE,EAAE;YAAA,CAAE;YACtB,IAAI,EAAE,QAAA,cAAc,CAAC,cAAc;YACnC,MAAM,EAAE,IAAI;YACZ,MAAM;SACP,CAAC;IACJ,CAAC;IAED;;OAEG,CACH,iBAAiB,EAAE,CACjB,CAAS,EACT,CAAS,EACT,YAAoB,CAAC,EACrB,SAAiB,EAAE,EACL,EAAE;QAChB,OAAO;YACL,EAAE,EAAE,CAAA,aAAA,EAAgB,IAAI,CAAC,GAAG,EAAE,CAAA,CAAA,EAAI,IAAI,CAAC,MAAM,EAAE,EAAE;YACjD,QAAQ,EAAE;gBAAE,CAAC;gBAAE,CAAC;YAAA,CAAE;YAClB,QAAQ,EAAE;gBAAE,CAAC,EAAE,SAAS;gBAAE,CAAC,EAAE,CAAC;YAAA,CAAE;YAChC,IAAI,EAAE;gBAAE,CAAC,EAAE,EAAE;gBAAE,CAAC,EAAE,EAAE;YAAA,CAAE;YACtB,IAAI,EAAE,QAAA,cAAc,CAAC,cAAc;YACnC,MAAM,EAAE,IAAI;YACZ,MAAM;SACP,CAAC;IACJ,CAAC;CACF,CAAC"}},
    {"offset": {"line": 3934, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/components/UI/GameUI.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/components/UI/GameUI.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { GameState } from '../../types';\n\ninterface GameUIProps {\n  gameState: GameState;\n  onRestart?: () => void;\n  onPause?: () => void;\n  onResume?: () => void;\n}\n\nexport const GameUI: React.FC<GameUIProps> = ({\n  gameState,\n  onRestart,\n  onPause,\n  onResume,\n}) => {\n  const { player, isPaused, isGameOver, score } = gameState;\n\n  return (\n    <div className=\"game-ui absolute inset-0 pointer-events-none\">\n      {/* Top HUD - Score and Health */}\n      <div className=\"top-hud absolute top-0 left-0 right-0 p-6 flex justify-between items-start\">\n        {/* Score Display */}\n        <div className=\"score-display pointer-events-auto\">\n          <div\n            className=\"bg-gradient-to-r from-purple-900/80 to-purple-800/80 backdrop-blur-sm rounded-lg px-6 py-3 border-2 border-purple-400/50 shadow-lg\"\n            style={{\n              boxShadow: '0 0 20px rgba(139, 92, 246, 0.3)',\n            }}\n          >\n            <div className=\"text-purple-300 text-sm font-semibold uppercase tracking-wider\">\n              Score\n            </div>\n            <div className=\"text-white text-3xl font-bold tabular-nums\">\n              {score.toLocaleString()}\n            </div>\n          </div>\n        </div>\n\n        {/* Health Display */}\n        <div className=\"health-display pointer-events-auto\">\n          <div\n            className=\"bg-gradient-to-r from-pink-900/80 to-purple-900/80 backdrop-blur-sm rounded-lg px-6 py-3 border-2 border-pink-400/50 shadow-lg\"\n            style={{\n              boxShadow: '0 0 20px rgba(236, 72, 153, 0.3)',\n            }}\n          >\n            <div className=\"text-pink-300 text-sm font-semibold uppercase tracking-wider\">\n              Health\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"text-white text-3xl font-bold tabular-nums\">\n                {player.health}%\n              </div>\n              {/* Health Bar */}\n              <div className=\"w-32 h-3 bg-gray-900/50 rounded-full overflow-hidden border border-pink-400/30\">\n                <div\n                  className=\"h-full transition-all duration-300 ease-out\"\n                  style={{\n                    width: `${player.health}%`,\n                    background:\n                      player.health > 50\n                        ? 'linear-gradient(90deg, #00f2ff, #00d4ff)'\n                        : player.health > 25\n                        ? 'linear-gradient(90deg, #ffaa00, #ff8800)'\n                        : 'linear-gradient(90deg, #ff0066, #ff0044)',\n                    boxShadow:\n                      player.health > 50\n                        ? '0 0 10px rgba(0, 242, 255, 0.5)'\n                        : player.health > 25\n                        ? '0 0 10px rgba(255, 170, 0, 0.5)'\n                        : '0 0 10px rgba(255, 0, 102, 0.5)',\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Pause Button */}\n      {!isGameOver && (\n        <div className=\"pause-button absolute top-6 left-1/2 transform -translate-x-1/2\">\n          <button\n            onClick={isPaused ? onResume : onPause}\n            className=\"pointer-events-auto bg-purple-600/80 hover:bg-purple-500/80 backdrop-blur-sm text-white px-6 py-3 rounded-lg font-bold uppercase tracking-wider transition-all duration-200 border-2 border-purple-400/50 shadow-lg hover:shadow-purple-400/50\"\n            style={{\n              boxShadow: '0 0 20px rgba(139, 92, 246, 0.3)',\n            }}\n          >\n            {isPaused ? 'Resume' : 'Pause'}\n          </button>\n        </div>\n      )}\n\n      {/* Pause Overlay */}\n      {isPaused && !isGameOver && (\n        <div className=\"pause-overlay absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center\">\n          <div className=\"text-center\">\n            <h2\n              className=\"text-6xl font-bold text-white mb-8\"\n              style={{\n                textShadow:\n                  '0 0 20px rgba(139, 92, 246, 0.8), 0 0 40px rgba(139, 92, 246, 0.4)',\n              }}\n            >\n              PAUSED\n            </h2>\n            <div className=\"flex gap-4 justify-center\">\n              <button\n                onClick={onResume}\n                className=\"pointer-events-auto bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-500 hover:to-purple-400 text-white px-8 py-4 rounded-lg font-bold text-xl uppercase tracking-wider transition-all duration-200 border-2 border-purple-400 shadow-lg hover:shadow-purple-400/50\"\n                style={{\n                  boxShadow: '0 0 30px rgba(139, 92, 246, 0.5)',\n                }}\n              >\n                Resume\n              </button>\n              <button\n                onClick={onRestart}\n                className=\"pointer-events-auto bg-gradient-to-r from-pink-600 to-pink-500 hover:from-pink-500 hover:to-pink-400 text-white px-8 py-4 rounded-lg font-bold text-xl uppercase tracking-wider transition-all duration-200 border-2 border-pink-400 shadow-lg hover:shadow-pink-400/50\"\n                style={{\n                  boxShadow: '0 0 30px rgba(236, 72, 153, 0.5)',\n                }}\n              >\n                Restart\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Game Over Overlay */}\n      {isGameOver && (\n        <div className=\"game-over-overlay absolute inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center animate-fade-in\">\n          <div className=\"text-center max-w-md mx-auto p-8\">\n            <h2\n              className=\"text-7xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 via-purple-500 to-cyan-500 mb-4 animate-pulse\"\n              style={{\n                textShadow: '0 0 30px rgba(236, 72, 153, 0.5)',\n              }}\n            >\n              GAME OVER\n            </h2>\n\n            {/* Final Score */}\n            <div className=\"my-8 bg-gradient-to-r from-purple-900/50 to-pink-900/50 backdrop-blur-sm rounded-lg p-6 border-2 border-purple-400/30\">\n              <div className=\"text-purple-300 text-lg font-semibold uppercase tracking-wider mb-2\">\n                Final Score\n              </div>\n              <div\n                className=\"text-white text-5xl font-bold tabular-nums\"\n                style={{\n                  textShadow: '0 0 20px rgba(255, 255, 255, 0.5)',\n                }}\n              >\n                {score.toLocaleString()}\n              </div>\n            </div>\n\n            {/* Stats */}\n            <div className=\"grid grid-cols-2 gap-4 mb-8\">\n              <div className=\"bg-purple-900/30 backdrop-blur-sm rounded-lg p-4 border border-purple-400/20\">\n                <div className=\"text-purple-300 text-xs uppercase tracking-wider mb-1\">\n                  Distance\n                </div>\n                <div className=\"text-white text-2xl font-bold\">\n                  {Math.floor((gameState.elapsedTime ?? 0) * 30)}m\n                </div>\n              </div>\n              <div className=\"bg-pink-900/30 backdrop-blur-sm rounded-lg p-4 border border-pink-400/20\">\n                <div className=\"text-pink-300 text-xs uppercase tracking-wider mb-1\">\n                  Difficulty\n                </div>\n                <div className=\"text-white text-2xl font-bold\">\n                  {gameState.currentLevel.difficulty}\n                </div>\n              </div>\n            </div>\n\n            {/* Restart Button */}\n            <button\n              onClick={onRestart}\n              className=\"pointer-events-auto bg-gradient-to-r from-purple-600 via-pink-600 to-cyan-600 hover:from-purple-500 hover:via-pink-500 hover:to-cyan-500 text-white px-10 py-5 rounded-lg font-bold text-2xl uppercase tracking-wider transition-all duration-300 border-2 border-white/30 shadow-lg hover:shadow-purple-400/50 transform hover:scale-105\"\n              style={{\n                boxShadow:\n                  '0 0 40px rgba(139, 92, 246, 0.6), 0 0 60px rgba(236, 72, 153, 0.4)',\n              }}\n            >\n              Try Again\n            </button>\n\n            <p className=\"text-gray-400 text-sm mt-6 italic\">\n              Press SPACE or click to restart\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* Level Indicator */}\n      {!isGameOver && (\n        <div className=\"level-indicator absolute bottom-6 left-6\">\n          <div className=\"bg-purple-900/50 backdrop-blur-sm rounded-lg px-4 py-2 border border-purple-400/30\">\n            <div className=\"text-purple-300 text-xs uppercase tracking-wider\">\n              Level: {gameState.currentLevel.name}\n            </div>\n            <div className=\"text-white text-sm font-semibold\">\n              Segment {gameState.currentSegmentIndex + 1} /{' '}\n              {gameState.currentLevel.segments.length}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Instructions (visible at start) */}\n      {!isGameOver && score === 0 && (\n        <div className=\"instructions absolute bottom-6 right-6\">\n          <div className=\"bg-cyan-900/50 backdrop-blur-sm rounded-lg px-4 py-3 border border-cyan-400/30 max-w-xs\">\n            <div className=\"text-cyan-300 text-xs uppercase tracking-wider mb-1 font-bold\">\n              Controls\n            </div>\n            <div className=\"text-white text-sm space-y-1\">\n              <div>SPACE - Jump</div>\n              <div>ESC - Pause</div>\n              <div>Avoid obstacles and survive!</div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Add custom animations to your global CSS\nconst styles = `\n  @keyframes fade-in {\n    from {\n      opacity: 0;\n      transform: scale(0.95);\n    }\n    to {\n      opacity: 1;\n      transform: scale(1);\n    }\n  }\n\n  .animate-fade-in {\n    animation: fade-in 0.3s ease-out;\n  }\n`;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4097, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/components/GameExample.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/components/GameExample.tsx"],"sourcesContent":["'use client';\n\n/**\n * Example component showing how to integrate the rendering system\n * This demonstrates the complete setup with GameCanvas, GameUI, and game state\n */\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { GameCanvas } from './GameCanvas';\nimport { GameUI } from './UI/GameUI';\nimport { GameState, Player, GameObjectType, Level, LevelSegment } from '../types';\n\n// Example initial game state\nconst createInitialGameState = (): GameState => {\n  const player: Player = {\n    id: 'player',\n    position: { x: 100, y: 400 },\n    velocity: { x: 5, y: 0 },\n    size: { x: 40, y: 40 },\n    type: GameObjectType.PLAYER,\n    active: true,\n    isJumping: false,\n    isOnGround: true,\n    health: 100,\n    score: 0,\n  };\n\n  const exampleSegment: LevelSegment = {\n    id: 'segment_0',\n    startX: 0,\n    length: 2000,\n    difficulty: 1,\n    objects: [\n      // Example spike\n      {\n        id: 'spike_1',\n        position: { x: 300, y: 510 },\n        velocity: { x: 0, y: 0 },\n        size: { x: 40, y: 40 },\n        type: GameObjectType.OBSTACLE_SPIKE,\n        active: true,\n      },\n      // Example block\n      {\n        id: 'block_1',\n        position: { x: 500, y: 500 },\n        velocity: { x: 0, y: 0 },\n        size: { x: 50, y: 50 },\n        type: GameObjectType.OBSTACLE_BLOCK,\n        active: true,\n      },\n      // Example platform\n      {\n        id: 'platform_1',\n        position: { x: 700, y: 500 },\n        velocity: { x: 0, y: 0 },\n        size: { x: 20, y: 20 },\n        type: GameObjectType.PLATFORM,\n        active: true,\n      },\n    ],\n  };\n\n  const exampleLevel: Level = {\n    id: 'example_level',\n    name: 'Example Level',\n    segments: [exampleSegment],\n    totalLength: 2000,\n    difficulty: 1,\n    generatedBy: 'manual',\n  };\n\n  return {\n    player,\n    currentLevel: exampleLevel,\n    currentSegmentIndex: 0,\n    gameObjects: exampleSegment.objects,\n    cameraOffset: 0,\n    isPaused: false,\n    isGameOver: false,\n    score: 0,\n    elapsedTime: 0,\n  };\n};\n\nexport const GameExample: React.FC = () => {\n  const [gameState, setGameState] = useState<GameState>(createInitialGameState());\n  const gameLoopRef = useRef<number | null>(null);\n  const lastTimeRef = useRef<number>(0);\n\n  // Simple game loop for demonstration\n  useEffect(() => {\n    const gameLoop = (currentTime: number) => {\n      if (!lastTimeRef.current) {\n        lastTimeRef.current = currentTime;\n      }\n\n      const deltaTime = currentTime - lastTimeRef.current;\n      lastTimeRef.current = currentTime;\n\n      if (!gameState.isPaused && !gameState.isGameOver) {\n        setGameState((prev) => {\n          // Move camera with player\n          const newCameraOffset = prev.player.position.x - 200;\n\n          // Simple auto-scroll\n          const newPlayerX = prev.player.position.x + 2;\n\n          // Increment score\n          const newScore = prev.score + 1;\n\n          // Example: Game over if health reaches 0\n          const isGameOver = prev.player.health <= 0;\n\n          return {\n            ...prev,\n            player: {\n              ...prev.player,\n              position: {\n                ...prev.player.position,\n                x: newPlayerX,\n              },\n            },\n            cameraOffset: newCameraOffset,\n            score: newScore,\n            isGameOver,\n          };\n        });\n      }\n\n      gameLoopRef.current = requestAnimationFrame(gameLoop);\n    };\n\n    gameLoopRef.current = requestAnimationFrame(gameLoop);\n\n    return () => {\n      if (gameLoopRef.current) {\n        cancelAnimationFrame(gameLoopRef.current);\n      }\n    };\n  }, [gameState.isPaused, gameState.isGameOver]);\n\n  const handleRestart = () => {\n    setGameState(createInitialGameState());\n    lastTimeRef.current = 0;\n  };\n\n  const handlePause = () => {\n    setGameState((prev) => ({ ...prev, isPaused: true }));\n  };\n\n  const handleResume = () => {\n    setGameState((prev) => ({ ...prev, isPaused: false }));\n    lastTimeRef.current = 0; // Reset time to prevent jump\n  };\n\n  // Keyboard controls example\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      switch (e.key) {\n        case ' ':\n        case 'Spacebar':\n          e.preventDefault();\n          if (gameState.isGameOver) {\n            handleRestart();\n          } else if (!gameState.isPaused && gameState.player.isOnGround) {\n            // Jump logic (simplified)\n            setGameState((prev) => ({\n              ...prev,\n              player: {\n                ...prev.player,\n                velocity: { ...prev.player.velocity, y: -15 },\n                isJumping: true,\n                isOnGround: false,\n              },\n            }));\n          }\n          break;\n        case 'Escape':\n          if (!gameState.isGameOver) {\n            if (gameState.isPaused) {\n              handleResume();\n            } else {\n              handlePause();\n            }\n          }\n          break;\n        case 'r':\n        case 'R':\n          handleRestart();\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [gameState]);\n\n  return (\n    <div className=\"relative w-full h-screen bg-gradient-to-b from-gray-900 to-black overflow-hidden\">\n      {/* Game Canvas */}\n      <div className=\"absolute inset-0 flex items-center justify-center\">\n        <div className=\"relative\" style={{ width: '1200px', height: '600px' }}>\n          <GameCanvas gameState={gameState} width={1200} height={600} />\n          <GameUI\n            gameState={gameState}\n            onRestart={handleRestart}\n            onPause={handlePause}\n            onResume={handleResume}\n          />\n        </div>\n      </div>\n\n      {/* Instructions overlay */}\n      <div className=\"absolute bottom-4 left-4 bg-black/50 backdrop-blur-sm text-white text-sm p-4 rounded-lg max-w-md\">\n        <h3 className=\"font-bold mb-2\">Example Game View</h3>\n        <p className=\"text-gray-300 mb-2\">\n          This is a demonstration of the rendering system. A full game would integrate with:\n        </p>\n        <ul className=\"list-disc list-inside text-gray-300 space-y-1 text-xs\">\n          <li>PhysicsEngine for realistic movement</li>\n          <li>CollisionDetection for interactions</li>\n          <li>GameEngine for game loop management</li>\n          <li>LevelGenerator for procedural levels</li>\n          <li>InputHandler for player controls</li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4406, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/components/index.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/components/index.ts"],"sourcesContent":["// Main exports for game components\n\nexport { GameCanvas } from './GameCanvas';\nexport { Player as PlayerComponent, PlayerRenderer } from './Player';\nexport { Obstacle as ObstacleComponent, ObstacleRenderer, ObstacleFactory } from './Obstacle';\nexport { GameUI } from './UI/GameUI';\nexport { GameExample } from './GameExample';\n"],"names":[],"mappings":"AAAA,mCAAmC;;;;;AAEnC,IAAA,uCAA0C;AAAjC,OAAA,cAAA,CAAA,SAAA,cAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,aAAA,UAAU;IAAA;AAAA,GAAA;AACnB,IAAA,+BAAqE;AAA5D,OAAA,cAAA,CAAA,SAAA,mBAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,SAAA,MAAM;IAAA;AAAA,GAAmB;AAAE,OAAA,cAAA,CAAA,SAAA,kBAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,SAAA,cAAc;IAAA;AAAA,GAAA;AAClD,IAAA,mCAA8F;AAArF,OAAA,cAAA,CAAA,SAAA,qBAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,WAAA,QAAQ;IAAA;AAAA,GAAqB;AAAE,OAAA,cAAA,CAAA,SAAA,oBAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,WAAA,gBAAgB;IAAA;AAAA,GAAA;AAAE,OAAA,cAAA,CAAA,SAAA,mBAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,WAAA,eAAe;IAAA;AAAA,GAAA;AACzE,IAAA,kCAAqC;AAA5B,OAAA,cAAA,CAAA,SAAA,UAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,SAAA,MAAM;IAAA;AAAA,GAAA;AACf,IAAA,yCAA4C;AAAnC,OAAA,cAAA,CAAA,SAAA,eAAA;IAAA,YAAA;IAAA,KAAA;QAAA,OAAA,cAAA,WAAW;IAAA;AAAA,GAAA"}},
    {"offset": {"line": 4471, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/utils/index.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/utils/index.ts"],"sourcesContent":["// Utils module exports\nexport const utilsPlaceholder = {};\n"],"names":[],"mappings":";;;;AAAA,uBAAuB;AACV,QAAA,gBAAgB,GAAG,CAAA,CAAE,CAAC"}},
    {"offset": {"line": 4484, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/packages/game-engine/dist/index.js","sources":["file:///Users/lily.liu/sync/packages/game-engine/src/index.ts"],"sourcesContent":["// Main entry point for @geometrydash/game-engine\n\n// Re-export all modules\nexport * from './engine';\nexport * from './systems';\nexport * from './levels';\nexport * from './components';\nexport * from './types';\nexport * from './utils';\n"],"names":[],"mappings":"AAAA,iDAAiD;;;;;;;;;;;;;;;;;;;;;;;AAEjD,wBAAwB;AACxB,uHAAA,SAAyB;AACzB,wHAAA,SAA0B;AAC1B,uHAAA,SAAyB;AACzB,2HAAA,SAA6B;AAC7B,sHAAA,SAAwB;AACxB,sHAAA,SAAwB"}},
    {"offset": {"line": 4521, "column": 0}, "map": {"version":3,"sources":["file:///Users/lily.liu/sync/apps/web/app/game/components/GeometryDashGame.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport Link from 'next/link';\nimport { GameEngine, Renderer, createTestLevel, GameState, Player, GameObjectType } from '@geometrydash/game-engine';\n\ninterface GeometryDashGameProps {\n  width?: number;\n  height?: number;\n}\n\nfunction formatSessionTime(seconds: number): string {\n  const mins = Math.floor(seconds / 60);\n  const secs = Math.floor(seconds % 60);\n  return `${mins}:${secs.toString().padStart(2, '0')}`;\n}\n\nexport function GeometryDashGame({ width = 1200, height = 600 }: GeometryDashGameProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const engineRef = useRef<GameEngine | null>(null);\n  const rendererRef = useRef<Renderer | null>(null);\n  const [gameState, setGameState] = useState<GameState | null>(null);\n  const [isGameOver, setIsGameOver] = useState(false);\n  const [showExtractModal, setShowExtractModal] = useState(false);\n  const [hasExtracted, setHasExtracted] = useState(false);\n  const [hasStarted, setHasStarted] = useState(false);\n\n  // Initialize game\n  useEffect(() => {\n    if (!canvasRef.current) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Create test level\n    const level = createTestLevel();\n\n    // Create game engine\n    const engine = new GameEngine(level, {\n      canvasWidth: width,\n      canvasHeight: height,\n      playerSpeed: 300,\n    });\n\n    // Create renderer\n    const renderer = new Renderer({\n      canvas,\n      width,\n      height,\n    });\n\n    // Set up render callback (engine handles canvas rendering)\n    engine.onRender((state) => {\n      renderer.render(state);\n    });\n\n    // Set up game over callback\n    engine.onGameOver((score) => {\n      setIsGameOver(true);\n      console.log('Game Over! Final score:', score);\n    });\n\n    // Initial render so user sees the level (game starts on Start button click)\n    renderer.render(engine.getState());\n\n    engineRef.current = engine;\n    rendererRef.current = renderer;\n\n    // Cleanup\n    return () => {\n      engine.destroy();\n      engineRef.current = null;\n    };\n  }, [width, height]);\n\n  // Poll engine state via requestAnimationFrame for reliable real-time UI updates\n  useEffect(() => {\n    let rafId: number;\n    const tick = () => {\n      const engine = engineRef.current;\n      if (engine) {\n        setGameState(engine.getState());\n      }\n      rafId = requestAnimationFrame(tick);\n    };\n    rafId = requestAnimationFrame(tick);\n    return () => cancelAnimationFrame(rafId);\n  }, []);\n\n  const handleStart = useCallback(() => {\n    if (engineRef.current) {\n      engineRef.current.start();\n      setHasStarted(true);\n    }\n  }, []);\n\n  const handleRestart = useCallback(() => {\n    if (engineRef.current) {\n      engineRef.current.restart();\n      engineRef.current.start();\n      setIsGameOver(false);\n      setHasExtracted(false);\n      setHasStarted(true);\n    }\n  }, []);\n\n  const handleExtractConfirm = useCallback(() => {\n    if (engineRef.current) {\n      engineRef.current.pause();\n      setHasExtracted(true);\n      setShowExtractModal(false);\n      // Cash out complete - user successfully extracted before dying\n    }\n  }, []);\n\n  const handleExtractCancel = useCallback(() => {\n    if (engineRef.current) {\n      engineRef.current.resume();\n    }\n    setShowExtractModal(false);\n  }, []);\n\n  // Keyboard controls for restart and extract\n  useEffect(() => {\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (e.key === 'r' || e.key === 'R') {\n        handleRestart();\n        return;\n      }\n      if (e.key === 'Enter' && hasStarted && !isGameOver && !hasExtracted && !showExtractModal) {\n        e.preventDefault();\n        if (engineRef.current) {\n          engineRef.current.pause();\n          setShowExtractModal(true);\n        }\n      }\n      if (e.key === 'Enter' && !hasStarted) {\n        e.preventDefault();\n        handleStart();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [handleRestart, handleStart, isGameOver, hasExtracted, hasStarted, showExtractModal]);\n\n  return (\n    <div className=\"relative w-full h-full flex items-center justify-center bg-gradient-to-b from-purple-950 to-purple-900\">\n      {/* Canvas */}\n      <canvas\n        ref={canvasRef}\n        width={width}\n        height={height}\n        className=\"border-4 border-purple-500 rounded-lg shadow-2xl shadow-purple-500/50\"\n      />\n\n      {/* Start screen */}\n      {!hasStarted && (\n        <div className=\"absolute inset-0 flex items-center justify-center pointer-events-auto z-10\">\n          <div className=\"bg-black/50 backdrop-blur-sm rounded-2xl border-2 border-purple-500 p-12 text-center\">\n            <h2 className=\"text-3xl font-bold text-white mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent\">\n              Ready to Play?\n            </h2>\n            <p className=\"text-purple-200 mb-8 max-w-md\">\n              Survive as long as you can. Press ENTER or click Start to extract and cash out before you die!\n            </p>\n            <button\n              onClick={handleStart}\n              className=\"px-12 py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-lg hover:from-purple-500 hover:to-pink-500 transition-all shadow-lg shadow-purple-500/50 text-xl\"\n            >\n              Start\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* UI Overlay - z-10 ensures HUD is above canvas */}\n      {gameState && hasStarted && (\n        <div className=\"absolute inset-0 pointer-events-none z-10\">\n          {/* HUD - Time Tracker */}\n          <div className=\"absolute top-8 left-8 bg-black/30 backdrop-blur-sm px-6 py-3 rounded-lg border border-purple-500/30 pointer-events-none\">\n            <div className=\"text-white font-mono\">\n              <div className=\"text-sm text-purple-300\">Time</div>\n              <div className=\"text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent\">\n                {formatSessionTime(gameState.elapsedTime)}\n              </div>\n            </div>\n          </div>\n\n          {/* Controls */}\n          <div className=\"absolute bottom-8 left-8 bg-black/30 backdrop-blur-sm px-4 py-2 rounded-lg border border-purple-500/30 pointer-events-none\">\n            <div className=\"text-xs text-purple-300 font-mono space-y-1\">\n              <div>SPACE / CLICK - Jump</div>\n              <div>ENTER - Extract & Cash Out</div>\n              <div>R - Restart</div>\n            </div>\n          </div>\n\n          {/* Extract confirmation modal */}\n          {showExtractModal && (\n            <div className=\"absolute inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center pointer-events-auto z-20\">\n              <div className=\"bg-gradient-to-br from-purple-900/90 to-pink-900/90 p-12 rounded-2xl border-2 border-purple-500 shadow-2xl shadow-purple-500/50 max-w-md\">\n                <h2 className=\"text-2xl font-bold text-white mb-4 text-center\">\n                  Confirm Extract\n                </h2>\n                <p className=\"text-purple-200 text-center mb-6\">\n                  Cash out now with your current time? Your run will end.\n                </p>\n                <div className=\"flex gap-4\">\n                  <button\n                    onClick={handleExtractConfirm}\n                    className=\"flex-1 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold rounded-lg transition-all shadow-lg shadow-green-500/30 hover:shadow-green-400/40 border border-green-400/30\"\n                  >\n                    Yes\n                  </button>\n                  <button\n                    onClick={handleExtractCancel}\n                    className=\"flex-1 px-6 py-3 border-2 border-purple-400/60 text-purple-200 font-bold rounded-lg transition-all hover:border-purple-300 hover:bg-purple-500/20 hover:text-white hover:shadow-lg hover:shadow-purple-500/25\"\n                  >\n                    No\n                  </button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Extracted success screen */}\n          {hasExtracted && (\n            <div className=\"absolute inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center pointer-events-auto\">\n              <div className=\"bg-gradient-to-br from-purple-900/90 to-green-900/90 p-12 rounded-2xl border-2 border-green-500 shadow-2xl shadow-green-500/50\">\n                <h2 className=\"text-5xl font-bold text-white mb-4 text-center bg-gradient-to-r from-green-300 to-cyan-300 bg-clip-text text-transparent\">\n                  EXTRACTED!\n                </h2>\n                <div className=\"text-center mb-8\">\n                  <div className=\"text-lg text-purple-300 mb-2\">Time Cashed Out</div>\n                  <div className=\"text-6xl font-bold text-white\">\n                    {formatSessionTime(gameState.elapsedTime)}\n                  </div>\n                </div>\n                <div className=\"flex flex-col gap-3\">\n                  <button\n                    onClick={handleRestart}\n                    className=\"w-full px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-lg hover:from-purple-500 hover:to-pink-500 transition-all shadow-lg\"\n                  >\n                    Play Again\n                  </button>\n                  <Link\n                    href=\"/\"\n                    className=\"w-full px-8 py-4 border-2 border-purple-400/60 text-purple-200 font-bold rounded-lg text-center transition-all hover:border-purple-300 hover:bg-purple-500/20 hover:text-white hover:shadow-lg hover:shadow-purple-500/25\"\n                  >\n                    Back to Homepage\n                  </Link>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Game Over Screen - pointer-events-auto so button is clickable */}\n          {isGameOver && (\n            <div className=\"absolute inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center pointer-events-auto\">\n              <div className=\"bg-gradient-to-br from-purple-900/90 to-pink-900/90 p-12 rounded-2xl border-2 border-purple-500 shadow-2xl shadow-purple-500/50\">\n                <h2 className=\"text-5xl font-bold text-white mb-4 text-center bg-gradient-to-r from-red-300 to-pink-300 bg-clip-text text-transparent\">\n                  GAME OVER\n                </h2>\n                <div className=\"text-center mb-8\">\n                  <div className=\"text-lg text-purple-300 mb-2\">Time Survived</div>\n                  <div className=\"text-6xl font-bold text-white\">\n                    {formatSessionTime(gameState.elapsedTime)}\n                  </div>\n                </div>\n                <div className=\"flex flex-col gap-3\">\n                  <button\n                    onClick={handleRestart}\n                    className=\"w-full px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold rounded-lg hover:from-purple-500 hover:to-pink-500 transition-all shadow-lg shadow-purple-500/50\"\n                  >\n                    Try Again\n                  </button>\n                  <Link\n                    href=\"/\"\n                    className=\"w-full px-8 py-4 border-2 border-purple-400/60 text-purple-200 font-bold rounded-lg text-center transition-all hover:border-purple-300 hover:bg-purple-500/20 hover:text-white hover:shadow-lg hover:shadow-purple-500/25\"\n                  >\n                    Back to Homepage\n                  </Link>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}